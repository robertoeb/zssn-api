  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  â†³ bin/rails:9
  [1m[35m (131.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  â†³ bin/rails:9
  [1m[35m (129.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  â†³ bin/rails:9
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Migrating to CreateSurvivors (20190318235202)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ bin/rails:9
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "age" integer, "gender" varchar(1), "latitude" float, "longitude" float, "infection_mark" integer DEFAULT 0, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  â†³ db/migrate/20190318235202_create_survivors.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235202"]]
  â†³ bin/rails:9
  [1m[35m (81.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ bin/rails:9
Migrating to CreateResources (20190318235618)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ bin/rails:9
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "resources" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar, "survivor_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, CONSTRAINT "fk_rails_a37fe4a4e9"
FOREIGN KEY ("survivor_id")
  REFERENCES "survivors" ("id")
)[0m
  â†³ db/migrate/20190318235618_create_resources.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "index_resources_on_survivor_id" ON "resources" ("survivor_id")[0m
  â†³ db/migrate/20190318235618_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235618"]]
  â†³ bin/rails:9
  [1m[35m (116.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-03-18 23:57:14.151920"], ["updated_at", "2019-03-18 23:57:14.151920"]]
  â†³ bin/rails:9
  [1m[35m (89.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ bin/rails:9
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started GET "/" for 127.0.0.1 at 2019-03-18 21:23:01 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/railties-5.2.2.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/railties-5.2.2.1/lib/rails/templates/rails/welcome/index.html.erb (6.8ms)
Completed 200 OK in 21ms (Views: 18.3ms | ActiveRecord: 0.0ms)


Started GET "/survivors" for 127.0.0.1 at 2019-03-18 21:26:14 -0300
  
ActionController::RoutingError (No route matches [GET] "/survivors"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/survivors" for 127.0.0.1 at 2019-03-18 21:33:33 -0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
  
ActionController::RoutingError (No route matches [GET] "/survivors"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/survivors" for 127.0.0.1 at 2019-03-18 21:35:11 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
  
ActionController::RoutingError (No route matches [GET] "/survivors"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2019-03-18 21:40:52 -0300
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/railties-5.2.2.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/railties-5.2.2.1/lib/rails/templates/rails/welcome/index.html.erb (9.4ms)
Completed 200 OK in 24ms (Views: 19.4ms | ActiveRecord: 0.0ms)


Started GET "/survivors" for 127.0.0.1 at 2019-03-18 21:41:11 -0300
  
ActionController::RoutingError (No route matches [GET] "/survivors"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ bin/rails:9
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ bin/rails:9
Started GET "/reports/infected" for 127.0.0.1 at 2019-03-18 22:13:08 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
  
ActionController::RoutingError (uninitialized constant Reports):
  
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `block in load_missing_constant'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `rescue in load_missing_constant'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:58:in `load_missing_constant'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:283:in `const_get'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `each'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `inject'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `constantize'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:46:in `controller'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/survivors" for 127.0.0.1 at 2019-03-18 22:24:40 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
  
ActionController::RoutingError (No route matches [GET] "/survivors"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:26:01 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:26:52 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:28:59 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end
Error occurred while parsing request parameters.
Contents:

{
  "name": 'Negan',
  "age": 47,
  "gender": 'M',
  "latitude": 38.8951100,
  "longitude": -77.0363700,
  "resources": [
    {
      "type": 'Water',
      "amount": 3
    },
    {
      "type": 'Food',
      "amount": 5
    },
    {
      "type": 'Medication',
      "amount": 2
    },
    {
      "type": 'Ammunition',
      "amount": 66
    }
  ]
}
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:30:09 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end
Error occurred while parsing request parameters.
Contents:

{
  "name": 'Negan',
  "age": 47,
  "gender": 'M',
  "latitude": 38.8951100,
  "longitude": -77.0363700,
  "resources": [
    {
      "type": 'Water',
      "amount": 3
    },
    {
      "type": 'Food',
      "amount": 5
    },
    {
      "type": 'Medication',
      "amount": 2
    },
    {
      "type": 'Ammunition',
      "amount": 66
    }
  ]
}
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:31:22 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:32:31 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:35:34 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/survivors_controller.rb:65: syntax error, unexpected end-of-input, expecting end
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:39:32 -0300
  
AbstractController::ActionNotFound (The action 'create' could not be found for SurvivorsController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:40:12 -0300
  
AbstractController::ActionNotFound (The action 'create' could not be found for SurvivorsController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{
  "name": 'Negan',
  "age": 47,
  "gender": 'M',
  "latitude": 38.8951100,
  "longitude": -77.0363700,
  "resources": [
    {
      "type": 'Water',
      "amount": 3
    },
    {
      "type": 'Food',
      "amount": 5
    },
    {
      "type": 'Medication',
      "amount": 2
    },
    {
      "type": 'Ammunition',
      "amount": 66
    }
  ]
}
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:41:01 -0300
Error occurred while parsing request parameters.
Contents:

{
  "name": 'Negan',
  "age": 47,
  "gender": 'M',
  "latitude": 38.8951100,
  "longitude": -77.0363700,
  "resources": [
    {
      "type": 'Water',
      "amount": 3
    },
    {
      "type": 'Food',
      "amount": 5
    },
    {
      "type": 'Medication',
      "amount": 2
    },
    {
      "type": 'Ammunition',
      "amount": 66
    }
  ]
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "name": 'Negan',
  "age": 47,
  "gender": 'M',
  "latitude": 38.8951100,
  "longitude": -77.0363700,
  "resources": [
    {
      "type": 'Water',
      "amount": 3
    },
    {
      "type": 'Food',
      "amount": 5
    },
    {
      "type": 'Medication',
      "amount": 2
    },
    {
      "type": 'Ammunition',
      "amount": 66
    }
  ]
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:41:59 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 6ms (ActiveRecord: 2.1ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:61:in `parsed_resources'
app/controllers/survivors_controller.rb:10:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:43:22 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:61:in `parsed_resources'
app/controllers/survivors_controller.rb:10:in `create'
Started GET "/survivors" for 127.0.0.1 at 2019-03-18 22:43:31 -0300
  
ActionController::RoutingError (No route matches [GET] "/survivors"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:43:39 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:61:in `parsed_resources'
app/controllers/survivors_controller.rb:10:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:43:52 -0300
Error occurred while parsing request parameters.
Contents:

{
  "name": "Negan",
  "age": 47,
  "gender": "M",
  "latitude": 38.8951100,
  "longitude": -77.0363700,
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "name": "Negan",
  "age": 47,
  "gender": "M",
  "latitude": 38.8951100,
  "longitude": -77.0363700,
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-18 22:44:26 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:61:in `parsed_resources'
app/controllers/survivors_controller.rb:10:in `create'
Started GET "/" for 127.0.0.1 at 2019-03-19 10:12:44 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/railties-5.2.2.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/railties-5.2.2.1/lib/rails/templates/rails/welcome/index.html.erb (4.2ms)
Completed 200 OK in 22ms (Views: 7.9ms | ActiveRecord: 0.0ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2019-03-19 10:12:53 -0300
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 10:12:59 -0300
  
ActionController::RoutingError (No route matches [GET] "/survivors"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 10:13:53 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.8ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:61:in `parsed_resources'
app/controllers/survivors_controller.rb:10:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 10:14:57 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>"47", "gender"=>"M", "latitude"=>"38.8951100", "longitude"=>"-77.0363700", "resources"=>[{"type"=>"Water", "amount"=>"3"}, {"type"=>"Food", "amount"=>"5"}, {"type"=>"Medication", "amount"=>"2"}, {"type"=>"Ammunition", "amount"=>"66"}], "survivor"=>{"name"=>"Negan", "age"=>"47", "gender"=>"M", "latitude"=>"38.8951100", "longitude"=>"-77.0363700"}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:61:in `parsed_resources'
app/controllers/survivors_controller.rb:10:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 10:24:33 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:61:in `parsed_resources'
app/controllers/survivors_controller.rb:10:in `create'
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 10:31:39 -0300
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by SurvivorsController#index as HTML
Completed 404 Not Found in 23ms (Views: 1.0ms | ActiveRecord: 2.5ms)


Started GET "/survivors/1" for 127.0.0.1 at 2019-03-19 10:31:56 -0300
Processing by SurvivorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:45
Completed 404 Not Found in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 10:32:13 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:62:in `parsed_resources'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 10:34:07 -0300
Error occurred while parsing request parameters.
Contents:

{
	"name": 'Negan',
    "age": 47,
    "gender": 'M',
    "latitude": 38.8951100,
    "longitude": -77.0363700,
    "resources": resources_params
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
	"name": 'Negan',
    "age": 47,
    "gender": 'M',
    "latitude": 38.8951100,
    "longitude": -77.0363700,
    "resources": resources_params
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 10:36:26 -0300
Error occurred while parsing request parameters.
Contents:

{
	"name": 'Negan',
    "age": 47,
    "gender": 'M',
    "latitude": 38.8951100,
    "longitude": -77.0363700,
    "resources": [
    	{
          "type": 'Water',
          "amount": 3
        },
        {
          "type": 'Food',
          "amount": 5
        },
        {
          "type": 'Medication',
          "amount": 2
        },
        {
          "type": 'Ammunition',
          "amount": 66
        }
      ]
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
	"name": 'Negan',
    "age": 47,
    "gender": 'M',
    "latitude": 38.8951100,
    "longitude": -77.0363700,
    "resources": [
    	{
          "type": 'Water',
          "amount": 3
        },
        {
          "type": 'Food',
          "amount": 5
        },
        {
          "type": 'Medication',
          "amount": 2
        },
        {
          "type": 'Ammunition',
          "amount": 66
        }
      ]
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 10:37:23 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:62:in `parsed_resources'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 10:37:52 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:62:in `parsed_resources'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 10:46:08 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.7ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:62:in `parsed_resources'
app/controllers/survivors_controller.rb:15:in `create'
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 10:52:04 -0300
Processing by SurvivorsController#index as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Completed 404 Not Found in 15ms (Views: 0.3ms | ActiveRecord: 0.8ms)


Started GET "/survivors/1" for 127.0.0.1 at 2019-03-19 10:52:12 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "id"=>"1", "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:45
Completed 200 OK in 22ms (Views: 0.7ms | ActiveRecord: 0.4ms)


Started GET "/survivors/" for 127.0.0.1 at 2019-03-19 10:53:26 -0300
Processing by SurvivorsController#index as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Completed 404 Not Found in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/survivors/1" for 127.0.0.1 at 2019-03-19 10:54:05 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "id"=>"1", "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:45
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 10:56:47 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"suvivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}]}, "survivor"=>{}}
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started GET "/survivors/1" for 127.0.0.1 at 2019-03-19 11:00:27 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by SurvivorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:45
Completed 404 Not Found in 10ms (Views: 0.3ms | ActiveRecord: 1.2ms)


Started GET "/survivors/" for 127.0.0.1 at 2019-03-19 11:00:32 -0300
Processing by SurvivorsController#index as HTML
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:06:33 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.3ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:62:in `parsed_resources'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:06:58 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:62:in `parsed_resources'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:08:40 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:09:52 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:14:29 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:14:41 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:15:03 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 69ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:15:48 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 11ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:20:04 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:20:40 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:21:39 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:21:47 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors/1?%7B=&%22name%22=%20%27Negan%27,&%22age%22=%2047,&%22gender%22=%20%27M%27,&%22latitude%22=%2038.8951100,&%22longitude%22=%20-77.0363700,&%22resources%22=%20[&%7B=&%22type%22=%20%27Water%27,&%22amount%22=%203&%7D,=&%7B=&%22type%22=%20%27Food%27,&%22amount%22=%205&%7D,=&%7B=&%22type%22=%20%27Medication%27,&%22amount%22=%202&%7D=&]=&%7D=" for 127.0.0.1 at 2019-03-19 11:23:32 -0300
  
ActionController::RoutingError (No route matches [POST] "/survivors/1"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:27:40 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 7ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:29:55 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 1ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:33:28 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{}}
Completed 400 Bad Request in 1ms (ActiveRecord: 1.8ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:49:in `survivor_params'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:33:52 -0300
Error occurred while parsing request parameters.
Contents:

{
  "name": 'Negan',
  "age": 47,
  "gender": 'M',
  "latitude": 38.8951100,
  "longitude": -77.0363700,
  "resources": [
    {
      "type": 'Water',
      "amount": 3
    },
    {
      "type": 'Food',
      "amount": 5
    },
    {
      "type": 'Medication',
      "amount": 2
    },
    {
      "type": 'Ammunition',
      "amount": 66
    }
  ]
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "name": 'Negan',
  "age": 47,
  "gender": 'M',
  "latitude": 38.8951100,
  "longitude": -77.0363700,
  "resources": [
    {
      "type": 'Water',
      "amount": 3
    },
    {
      "type": 'Food',
      "amount": 5
    },
    {
      "type": 'Medication',
      "amount": 2
    },
    {
      "type": 'Ammunition',
      "amount": 66
    }
  ]
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:34:26 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>66}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:62:in `parsed_resources'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:34:37 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}, {"type"=>"Food", "amount"=>5}, {"type"=>"Medication", "amount"=>2}, {"type"=>"Ammunition", "amount"=>2}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:62:in `parsed_resources'
app/controllers/survivors_controller.rb:15:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 11:40:11 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637, "resources"=>[{"type"=>"Water", "amount"=>3}], "survivor"=>{"name"=>"Negan", "age"=>47, "gender"=>"M", "latitude"=>38.89511, "longitude"=>-77.03637}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 2ms (ActiveRecord: 1.1ms)


  
NoMethodError (undefined method `each' for nil:NilClass):
  
app/controllers/survivors_controller.rb:62:in `parsed_resources'
app/controllers/survivors_controller.rb:15:in `create'
Started GET "/" for 127.0.0.1 at 2019-03-19 14:08:26 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/railties-5.2.2.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/railties-5.2.2.1/lib/rails/templates/rails/welcome/index.html.erb (4.1ms)
Completed 200 OK in 56ms (Views: 25.3ms | ActiveRecord: 0.0ms)


Started GET "/survivor" for 127.0.0.1 at 2019-03-19 14:08:32 -0300
  
ActionController::RoutingError (No route matches [GET] "/survivor"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 14:08:35 -0300
Processing by SurvivorsController#index as HTML
Completed 404 Not Found in 77ms (Views: 0.8ms | ActiveRecord: 1.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 14:15:35 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Error occurred while parsing request parameters.
Contents:

{
  "name": "Negan',
  "age": 47,
  "gender": "M",
  "latitude": 38.8951100,
  "longitude": -77.0363700,
  "resources": [
    {
      "type": "Water",
      "amount": 3
    },
    {
      "type": "Food",
      "amount": 5
    },
    {
      "type": "Medication",
      "amount": 2
    },
    {
      "type": "Ammunition",
      "amount": 66
    }
  ]
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "name": "Negan',
  "age": 47,
  "gender": "M",
  "latitude": 38.8951100,
  "longitude": -77.0363700,
  "resources": [
    {
      "type": "Water",
      "amount": 3
    },
    {
      "type": "Food",
      "amount": 5
    },
    {
      "type": "Medication",
      "amount": 2
    },
    {
      "type": "Ammunition",
      "amount": 66
    }
  ]
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 14:16:44 -0300
Error occurred while parsing request parameters.
Contents:

{
  "name": "Negan',
  "age": 47,
  "gender": "M",
  "latitude": 38.8951100,
  "longitude": -77.0363700,
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
  "name": "Negan',
  "age": 47,
  "gender": "M",
  "latitude": 38.8951100,
  "longitude": -77.0363700,
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 14:17:50 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test", "age"=>"43", "gender"=>"M", "last_location"=>{"latitude"=>"89809809809", "longitude"=>"-88983982100"}, "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :last_location
Unpermitted parameters: :last_location, :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :last_location
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 2353ms (Views: 0.3ms | ActiveRecord: 4.9ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 14:18:23 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test", "age"=>"43", "gender"=>"M", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mSurvivor Create (18.8ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Survivor Test"], ["age", 43], ["gender", "M"], ["latitude", 89809809809.0], ["longitude", -88983982100.0], ["created_at", "2019-03-19 17:18:23.630360"], ["updated_at", "2019-03-19 17:18:23.630360"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mWater Create (0.6ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 2], ["created_at", "2019-03-19 17:18:23.652467"], ["updated_at", "2019-03-19 17:18:23.652467"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mFood Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 2], ["created_at", "2019-03-19 17:18:23.654933"], ["updated_at", "2019-03-19 17:18:23.654933"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (261.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 201 Created in 303ms (Views: 1.4ms | ActiveRecord: 281.0ms)


Started GET "/survivors" for 127.0.0.1 at 2019-03-19 14:20:57 -0300
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test", "age"=>"43", "gender"=>"M", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Completed 404 Not Found in 9ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/survivors" for 127.0.0.1 at 2019-03-19 14:22:19 -0300
Processing by SurvivorsController#index as HTML
Completed 404 Not Found in 11ms (Views: 0.6ms | ActiveRecord: 1.5ms)


Started GET "/survivors" for 127.0.0.1 at 2019-03-19 14:22:22 -0300
Processing by SurvivorsController#index as HTML
Completed 404 Not Found in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2019-03-19 14:22:23 -0300
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/survivors/1" for 127.0.0.1 at 2019-03-19 14:22:26 -0300
Processing by SurvivorsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 404 Not Found in 4ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started GET "/survivors/2" for 127.0.0.1 at 2019-03-19 14:22:28 -0300
Processing by SurvivorsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 200 OK in 81ms (Views: 1.8ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 14:23:57 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"40", "gender"=>"M", "latitude"=>"89809809809", "longitude"=>"-88983982100"}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 409 Conflict in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 14:24:19 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"", "gender"=>"M", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 77ms (Views: 0.4ms | ActiveRecord: 1.3ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 14:27:39 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"", "gender"=>"", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 36ms (Views: 0.4ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 15:28:56 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"E", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 31ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 15:29:02 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"M", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mSurvivor Create (3.9ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Survivor Test2"], ["age", 20], ["gender", "M"], ["latitude", 89809809809.0], ["longitude", -88983982100.0], ["created_at", "2019-03-19 18:29:02.840863"], ["updated_at", "2019-03-19 18:29:02.840863"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mWater Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 3], ["created_at", "2019-03-19 18:29:02.848292"], ["updated_at", "2019-03-19 18:29:02.848292"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mFood Create (2.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 3], ["created_at", "2019-03-19 18:29:02.850782"], ["updated_at", "2019-03-19 18:29:02.850782"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (170.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 201 Created in 197ms (Views: 1.0ms | ActiveRecord: 176.8ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 15:29:40 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 22ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 15:30:02 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 200 OK in 87ms (Views: 0.3ms | ActiveRecord: 3.6ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 15:30:10 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 200 OK in 10ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 15:30:14 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 87ms (Views: 0.4ms | ActiveRecord: 2.9ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 15:30:31 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:21: syntax error, unexpected tLABEL
        render json: status: :unprocessable_entity
                     ^~~~~~~):
  
app/controllers/survivors_controller.rb:21: syntax error, unexpected tLABEL
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:08:15 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 92ms (Views: 0.3ms | ActiveRecord: 4.2ms)


Started POST "/survivors/1/report_infection" for 127.0.0.1 at 2019-03-19 16:21:59 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"1", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 404 Not Found in 6ms (Views: 0.3ms | ActiveRecord: 1.2ms)


Started POST "/survivors/2/report_infection" for 127.0.0.1 at 2019-03-19 16:22:06 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"2", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started POST "/survivors/2/report_infection" for 127.0.0.1 at 2019-03-19 16:22:09 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"2", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors/2/report_infection" for 127.0.0.1 at 2019-03-19 16:22:15 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"2", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors/2/report_infection" for 127.0.0.1 at 2019-03-19 16:22:18 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"2", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors/2/report_infection" for 127.0.0.1 at 2019-03-19 16:22:25 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"2", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors/4/report_infection" for 127.0.0.1 at 2019-03-19 16:22:30 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"4", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 404 Not Found in 5ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors/2/report_infection" for 127.0.0.1 at 2019-03-19 16:22:36 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"2", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/reports/non-infected" for 127.0.0.1 at 2019-03-19 16:23:13 -0300
  
ActionController::RoutingError (No route matches [POST] "/reports/non-infected"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/non-infected" for 127.0.0.1 at 2019-03-19 16:23:19 -0300
  
ActionController::RoutingError (uninitialized constant Reports):
  
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `block in load_missing_constant'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `rescue in load_missing_constant'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:58:in `load_missing_constant'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:283:in `const_get'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `each'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `inject'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `constantize'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:46:in `controller'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/non-infected" for 127.0.0.1 at 2019-03-19 16:23:25 -0300
  
ActionController::RoutingError (uninitialized constant Reports):
  
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `block in load_missing_constant'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `rescue in load_missing_constant'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:58:in `load_missing_constant'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:283:in `const_get'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `each'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `inject'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `constantize'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:46:in `controller'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/non-infected" for 127.0.0.1 at 2019-03-19 16:23:31 -0300
  
ActionController::RoutingError (uninitialized constant Reports):
  
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `block in load_missing_constant'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `rescue in load_missing_constant'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:58:in `load_missing_constant'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:283:in `const_get'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `each'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `inject'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `constantize'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:46:in `controller'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/resources" for 127.0.0.1 at 2019-03-19 16:23:47 -0300
  
ActionController::RoutingError (uninitialized constant Reports):
  
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `block in load_missing_constant'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:8:in `without_bootsnap_cache'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:76:in `rescue in load_missing_constant'
bootsnap (1.4.1) lib/bootsnap/load_path_cache/core_ext/active_support.rb:58:in `load_missing_constant'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:283:in `const_get'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:283:in `block in constantize'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `each'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `inject'
activesupport (5.2.2.1) lib/active_support/inflector/methods.rb:281:in `constantize'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:88:in `controller_class_for'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:81:in `controller_class'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:46:in `controller'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 16:24:16 -0300
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
Completed 404 Not Found in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/survivor" for 127.0.0.1 at 2019-03-19 16:24:49 -0300
  
ActionController::RoutingError (No route matches [GET] "/survivor"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 16:24:56 -0300
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
Completed 404 Not Found in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:37:40 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"E", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 74ms (Views: 0.4ms | ActiveRecord: 2.9ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:38:23 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"E", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 133ms (Views: 0.3ms | ActiveRecord: 4.3ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:40:34 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"E", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 79ms (Views: 0.4ms | ActiveRecord: 2.9ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:40:39 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"E", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 8ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:40:42 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>" E", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 8ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:40:50 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"M2", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mSurvivor Create (1.4ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Survivor Test2"], ["age", 20], ["gender", "M2"], ["latitude", 89809809809.0], ["longitude", -88983982100.0], ["created_at", "2019-03-19 19:40:50.875949"], ["updated_at", "2019-03-19 19:40:50.875949"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mWater Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 4], ["created_at", "2019-03-19 19:40:50.884248"], ["updated_at", "2019-03-19 19:40:50.884248"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mFood Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 4], ["created_at", "2019-03-19 19:40:50.886513"], ["updated_at", "2019-03-19 19:40:50.886513"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (161.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 201 Created in 187ms (Views: 1.2ms | ActiveRecord: 164.1ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:41:08 -0300
  
ArgumentError (The provided regular expression is using multiline anchors (^ or $), which may present a security risk. Did you mean to use \A and \z, or forgot to add the :multiline => true option?):
  
app/models/survivor.rb:8:in `<class:Survivor>'
app/models/survivor.rb:1:in `<main>'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:41:15 -0300
  
ArgumentError (The provided regular expression is using multiline anchors (^ or $), which may present a security risk. Did you mean to use \A and \z, or forgot to add the :multiline => true option?):
  
app/models/survivor.rb:8:in `<class:Survivor>'
app/models/survivor.rb:1:in `<main>'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:41:24 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"M5", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 52ms (Views: 0.4ms | ActiveRecord: 3.1ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:41:28 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"M5", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 30ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:41:31 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"M5", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 19ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:41:37 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"2M", "latitude"=>"89809809809", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 27ms (Views: 0.3ms | ActiveRecord: 0.3ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:45:32 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"M", "latitude"=>"aaa", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 8ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:45:36 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"M", "latitude"=>"aaa", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 9ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:45:39 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"M", "latitude"=>"aaa", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 8ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:45:41 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"M", "latitude"=>"aaa", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 422 Unprocessable Entity in 40ms (Views: 0.6ms | ActiveRecord: 0.3ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:46:11 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Survivor Test2", "age"=>"20", "gender"=>"M", "latitude"=>"aaa", "longitude"=>"-88983982100", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mSurvivor Create (0.8ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Survivor Test2"], ["age", 20], ["gender", "M"], ["latitude", 0.0], ["longitude", -88983982100.0], ["created_at", "2019-03-19 19:46:11.886546"], ["updated_at", "2019-03-19 19:46:11.886546"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mWater Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 5], ["created_at", "2019-03-19 19:46:11.890183"], ["updated_at", "2019-03-19 19:46:11.890183"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mFood Create (0.8ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 5], ["created_at", "2019-03-19 19:46:11.896609"], ["updated_at", "2019-03-19 19:46:11.896609"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (100.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 201 Created in 167ms (Views: 1.5ms | ActiveRecord: 104.3ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:47:38 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/models/survivor.rb:9: syntax error, unexpected ',', expecting =>
            :latitude, format: { with: /\A\d\z/, me...
                     ^):
  
app/models/survivor.rb:9: syntax error, unexpected ',', expecting =>
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 16:48:25 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/models/survivor.rb:9: syntax error, unexpected ',', expecting =>
            :latitude, format: { with: /\A(\d)\z/, ...
                     ^
/home/roberto/Documents/Ruby/zssn/app/models/survivor.rb:10: syntax error, unexpected ')', expecting end):
  
app/models/survivor.rb:9: syntax error, unexpected ',', expecting =>
app/models/survivor.rb:10: syntax error, unexpected ')', expecting end
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 16:48:51 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/models/survivor.rb:9: syntax error, unexpected ')', expecting end):
  
app/models/survivor.rb:9: syntax error, unexpected ')', expecting end
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 16:49:00 -0300
Processing by SurvivorsController#index as */*
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms)


  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/models/survivor.rb:9: syntax error, unexpected ')', expecting end):
  
app/models/survivor.rb:9: syntax error, unexpected ')', expecting end
app/controllers/survivors_controller.rb:50:in `find_survivor'
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 16:49:09 -0300
Processing by SurvivorsController#index as */*
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)


  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/models/survivor.rb:9: syntax error, unexpected ')', expecting end):
  
app/models/survivor.rb:9: syntax error, unexpected ')', expecting end
app/controllers/survivors_controller.rb:50:in `find_survivor'
Started GET "/survivors/1" for 127.0.0.1 at 2019-03-19 16:49:15 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"1"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/models/survivor.rb:9: syntax error, unexpected ')', expecting end):
  
app/models/survivor.rb:9: syntax error, unexpected ')', expecting end
app/controllers/survivors_controller.rb:50:in `find_survivor'
Started GET "/survivors/2" for 127.0.0.1 at 2019-03-19 16:49:25 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"2"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/models/survivor.rb:9: syntax error, unexpected ')', expecting end):
  
app/models/survivor.rb:9: syntax error, unexpected ')', expecting end
app/controllers/survivors_controller.rb:50:in `find_survivor'
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 16:49:57 -0300
Processing by SurvivorsController#index as */*
Completed 404 Not Found in 13ms (Views: 0.3ms | ActiveRecord: 1.4ms)


Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 16:53:44 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 400 Bad Request in 16ms (ActiveRecord: 0.4ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:62:in `update_params'
app/controllers/survivors_controller.rb:29:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 16:54:42 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:62:in `update_params'
app/controllers/survivors_controller.rb:29:in `update'
Started PUT "/survivors/2" for 127.0.0.1 at 2019-03-19 16:55:04 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:50
Completed 400 Bad Request in 9ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:62:in `update_params'
app/controllers/survivors_controller.rb:29:in `update'
Started PUT "/survivors/2" for 127.0.0.1 at 2019-03-19 16:57:10 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 42ms (ActiveRecord: 2.1ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:70:in `update_params'
app/controllers/survivors_controller.rb:37:in `update'
Started PUT "/survivors/2" for 127.0.0.1 at 2019-03-19 16:57:26 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 5ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:70:in `update_params'
app/controllers/survivors_controller.rb:37:in `update'
Started PUT "/survivors/2" for 127.0.0.1 at 2019-03-19 16:59:25 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 46ms (ActiveRecord: 1.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:70:in `update_params'
app/controllers/survivors_controller.rb:37:in `update'
Started PUT "/survivors/2" for 127.0.0.1 at 2019-03-19 17:01:42 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:31: syntax error, unexpected tLABEL
...butes(longitude: update_params:longitude, latitude: update_p...
...                 ^~~~~~~~~~~~~~):
  
app/controllers/survivors_controller.rb:31: syntax error, unexpected tLABEL
Started PUT "/survivors/2" for 127.0.0.1 at 2019-03-19 17:02:30 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 35ms (ActiveRecord: 2.1ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:70:in `update_params'
app/controllers/survivors_controller.rb:37:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:02:41 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:70:in `update_params'
app/controllers/survivors_controller.rb:37:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:04:05 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:59
Completed 400 Bad Request in 22ms (ActiveRecord: 1.4ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:38:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:06:14 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 32ms (ActiveRecord: 1.9ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:70:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:07:14 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 40ms (ActiveRecord: 2.8ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:70:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:09:15 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 21ms (ActiveRecord: 1.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:70:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:18:15 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:62
Completed 400 Bad Request in 31ms (ActiveRecord: 1.9ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:75:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started GET "/survivors" for 127.0.0.1 at 2019-03-19 17:18:32 -0300
Processing by SurvivorsController#index as */*
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  â†³ app/controllers/survivors_controller.rb:7
Completed 200 OK in 5ms (Views: 3.9ms | ActiveRecord: 0.3ms)


Started GET "/survivors/2" for 127.0.0.1 at 2019-03-19 17:18:46 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"2"}
Completed 200 OK in 1ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/survivors/3" for 127.0.0.1 at 2019-03-19 17:18:53 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"3"}
Completed 200 OK in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms)


Started GET "/survivors/3" for 127.0.0.1 at 2019-03-19 17:19:49 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:62
Completed 200 OK in 31ms (Views: 1.0ms | ActiveRecord: 1.7ms)


Started GET "/survivors/" for 127.0.0.1 at 2019-03-19 17:20:17 -0300
Processing by SurvivorsController#index as */*
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  â†³ app/controllers/survivors_controller.rb:7
Completed 200 OK in 27ms (Views: 20.3ms | ActiveRecord: 1.6ms)


Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:21:40 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 33ms (ActiveRecord: 2.6ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:22:50 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:59
Completed 400 Bad Request in 42ms (ActiveRecord: 1.7ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:72:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:22:57 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 48ms (ActiveRecord: 13.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:23:10 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 3ms (ActiveRecord: 0.8ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:23:15 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:23:34 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 62ms (ActiveRecord: 1.8ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 17:24:05 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 31ms (ActiveRecord: 1.6ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started GET "/" for 127.0.0.1 at 2019-03-19 18:46:43 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by Rails::WelcomeController#index as HTML
  Rendering /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/railties-5.2.2.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/railties-5.2.2.1/lib/rails/templates/rails/welcome/index.html.erb (10.5ms)
Completed 200 OK in 82ms (Views: 31.1ms | ActiveRecord: 0.0ms)


Started GET "/survivors" for 127.0.0.1 at 2019-03-19 18:46:46 -0300
Processing by SurvivorsController#index as HTML
  [1m[36mSurvivor Load (1.1ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  â†³ app/controllers/survivors_controller.rb:7
Completed 200 OK in 112ms (Views: 48.5ms | ActiveRecord: 2.3ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2019-03-19 18:46:48 -0300
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started PATCH "/survivors/2" for 127.0.0.1 at 2019-03-19 18:48:44 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"2"}
  [1m[36mSurvivor Load (1.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 38ms (ActiveRecord: 1.4ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 18:48:55 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 1ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 18:49:20 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 18:51:12 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started GET "/survivors/" for 127.0.0.1 at 2019-03-19 18:51:19 -0300
Processing by SurvivorsController#index as */*
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  â†³ app/controllers/survivors_controller.rb:7
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.3ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 18:52:13 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Patricia Felix", "age"=>"24", "gender"=>"F", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mSurvivor Create (11.7ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Patricia Felix"], ["age", 24], ["gender", "F"], ["latitude", -84.3879824], ["longitude", -84.3879824], ["created_at", "2019-03-19 21:52:13.666444"], ["updated_at", "2019-03-19 21:52:13.666444"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mWater Create (1.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 6], ["created_at", "2019-03-19 21:52:13.685707"], ["updated_at", "2019-03-19 21:52:13.685707"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mFood Create (0.6ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 6], ["created_at", "2019-03-19 21:52:13.691299"], ["updated_at", "2019-03-19 21:52:13.691299"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (67.6ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 201 Created in 579ms (Views: 2.8ms | ActiveRecord: 82.2ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 18:52:48 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 18:53:24 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (1.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 75ms (ActiveRecord: 5.1ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:37:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 18:55:27 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:57
Completed 400 Bad Request in 26ms (ActiveRecord: 1.1ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:70:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 18:55:58 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (10.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:59
Completed 400 Bad Request in 98ms (ActiveRecord: 13.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:72:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:01:37 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:58
Completed 400 Bad Request in 48ms (ActiveRecord: 1.7ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:71:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:02:59 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:51
Completed 400 Bad Request in 28ms (ActiveRecord: 1.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:64:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:03:55 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:51
Completed 400 Bad Request in 4ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:64:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:04:07 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:51
Completed 400 Bad Request in 1ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:64:in `update_params'
app/controllers/survivors_controller.rb:30:in `update'
Started POST "/survivors" for 127.0.0.1 at 2019-03-19 19:05:09 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Patricia Felix", "age"=>"24", "gender"=>"F", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mSurvivor Create (1.9ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Patricia Felix"], ["age", 24], ["gender", "F"], ["latitude", -84.3879824], ["longitude", -84.3879824], ["created_at", "2019-03-19 22:05:09.911438"], ["updated_at", "2019-03-19 22:05:09.911438"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mWater Create (1.0ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 7], ["created_at", "2019-03-19 22:05:09.927781"], ["updated_at", "2019-03-19 22:05:09.927781"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[36mFood Create (0.9ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 7], ["created_at", "2019-03-19 22:05:09.934193"], ["updated_at", "2019-03-19 22:05:09.934193"]]
  â†³ app/controllers/survivors_controller.rb:18
  [1m[35m (139.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:18
Completed 201 Created in 273ms (Views: 0.7ms | ActiveRecord: 151.4ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:11:36 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 98ms (ActiveRecord: 1.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:11:42 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 1ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:12:31 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 37ms (ActiveRecord: 2.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:16:59 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 105ms (ActiveRecord: 3.4ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:17:04 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started GET "/survivors/" for 127.0.0.1 at 2019-03-19 19:17:19 -0300
Processing by SurvivorsController#index as */*
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  â†³ app/controllers/survivors_controller.rb:7
Completed 200 OK in 6ms (Views: 4.8ms | ActiveRecord: 0.7ms)


Started GET "/survivors/3" for 127.0.0.1 at 2019-03-19 19:17:34 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.2ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:18:12 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 1ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:25:01 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 47ms (ActiveRecord: 1.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:25:07 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 1ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:25:20 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (1.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 108ms (ActiveRecord: 2.9ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:25:23 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:25:27 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 3ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:25:33 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 1ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:25:34 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 1ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:25:35 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:25:37 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 12ms (ActiveRecord: 0.3ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:29:22 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 33ms (ActiveRecord: 1.4ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:29:29 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PUT "/survivors/3" for 127.0.0.1 at 2019-03-19 19:29:43 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:29:47 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 4ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 19:30:50 -0300
  
ActionController::RoutingError (No route matches [PATCH] "/survivors/3/report_infection"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 19:30:56 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 200 OK in 36ms (Views: 0.7ms | ActiveRecord: 1.3ms)


Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 19:30:57 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 19:30:59 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 19:31:00 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 200 OK in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:31:14 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 1ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3?latitude=00000&longitude=000000" for 127.0.0.1 at 2019-03-19 19:32:40 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"latitude"=>"00000", "longitude"=>"000000", "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3?latitude=00000&longitude=000000" for 127.0.0.1 at 2019-03-19 19:32:43 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"latitude"=>"00000", "longitude"=>"000000", "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 400 Bad Request in 2ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:65:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:33:01 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"33.7489954", "longitude"=>"-84.3879824"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
  [1m[36mSurvivor Update (0.4ms)[0m  [1m[33mUPDATE "survivors" SET "latitude" = ?, "longitude" = ?, "updated_at" = ? WHERE "survivors"."id" = ?[0m  [["latitude", 33.7489954], ["longitude", -84.3879824], ["updated_at", "2019-03-19 22:33:01.071904"], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:33
  [1m[35m (165.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
Completed 204 No Content in 178ms (ActiveRecord: 166.6ms)


Started GET "/survivors/3" for 127.0.0.1 at 2019-03-19 19:33:19 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 19:33:54 -0300
Processing by SurvivorsController#create as */*
Completed 400 Bad Request in 0ms (ActiveRecord: 0.0ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:61:in `resources_params'
app/controllers/survivors_controller.rb:17:in `create'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:35:31 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:34: syntax error, unexpected tLABEL
      render json: location: @survivor
                   ^~~~~~~~~):
  
app/controllers/survivors_controller.rb:34: syntax error, unexpected tLABEL
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:35:53 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"33.7489954", "longitude"=>"-84.3879824"}, "id"=>"3"}
  [1m[36mSurvivor Load (1.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
  [1m[35m (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
Completed 500 Internal Server Error in 94ms (ActiveRecord: 4.1ms)


  
NoMethodError (undefined method `longitude' for 33.7489954:Float):
  
app/controllers/survivors_controller.rb:34:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:36:00 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"33.7489954", "longitude"=>"-84.3879824"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
  [1m[35m (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
Completed 200 OK in 90ms (Views: 4.8ms | ActiveRecord: 3.4ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:41:03 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"33.7489954", "longitude"=>"-84.3879824"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
  [1m[35m (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
Completed 200 OK in 32ms (Views: 0.8ms | ActiveRecord: 2.1ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:41:23 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"35.7489954", "longitude"=>"-66.3879824"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
  [1m[36mSurvivor Update (0.5ms)[0m  [1m[33mUPDATE "survivors" SET "latitude" = ?, "longitude" = ?, "updated_at" = ? WHERE "survivors"."id" = ?[0m  [["latitude", 35.7489954], ["longitude", -66.3879824], ["updated_at", "2019-03-19 22:41:23.269764"], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:33
  [1m[35m (152.6ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
Completed 200 OK in 165ms (Views: 0.6ms | ActiveRecord: 153.4ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:41:29 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"35.7489954", "longitude"=>"-66.3879824"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:52
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
Completed 200 OK in 60ms (Views: 11.6ms | ActiveRecord: 2.6ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:42:24 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
Completed 400 Bad Request in 25ms (ActiveRecord: 1.7ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: survivor):
  
app/controllers/survivors_controller.rb:67:in `update_params'
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:42:55 -0300
Error occurred while parsing request parameters.
Contents:

{
    "survivor": 
    {
        "latitude": , 
        "longitude":
    }
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
    "survivor": 
    {
        "latitude": , 
        "longitude":
    }
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:43:02 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"", "longitude"=>""}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
Completed 200 OK in 976ms (Views: 0.7ms | ActiveRecord: 0.4ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:43:49 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"", "longitude"=>""}, "id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
Completed 409 Conflict in 40ms (Views: 1.1ms | ActiveRecord: 2.5ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:45:06 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"fafas", "longitude"=>"fasfasf"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
Completed 409 Conflict in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:45:20 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"00", "longitude"=>"00"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
Completed 409 Conflict in 2ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:45:55 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"00", "longitude"=>"00"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
  [1m[36mSurvivor Update (1.5ms)[0m  [1m[33mUPDATE "survivors" SET "latitude" = ?, "longitude" = ?, "updated_at" = ? WHERE "survivors"."id" = ?[0m  [["latitude", 0.0], ["longitude", 0.0], ["updated_at", "2019-03-19 22:45:56.022339"], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:33
  [1m[35m (194.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
Completed 200 OK in 245ms (Views: 0.6ms | ActiveRecord: 198.4ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:46:02 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"", "longitude"=>""}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:33
Completed 200 OK in 8ms (Views: 0.8ms | ActiveRecord: 0.4ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:46:23 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"", "longitude"=>""}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
Completed 500 Internal Server Error in 294ms (ActiveRecord: 1.5ms)


  
NameError (undefined local variable or method `null' for #<SurvivorsController:0x00007f55c022cc58>):
  
app/controllers/survivors_controller.rb:32:in `update'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:47:10 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"", "longitude"=>""}, "id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:51
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
Completed 204 No Content in 70ms (ActiveRecord: 2.7ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:47:51 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:33: syntax error, unexpected tIDENTIFIER, expecting end
... render json: @survivorm status: :success
...                         ^~~~~~):
  
app/controllers/survivors_controller.rb:33: syntax error, unexpected tIDENTIFIER, expecting end
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:48:40 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"", "longitude"=>""}, "id"=>"3"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:51
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
  [1m[35m (0.4ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
Completed 204 No Content in 47ms (ActiveRecord: 2.6ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:48:43 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"", "longitude"=>""}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:51
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
Completed 204 No Content in 4ms (ActiveRecord: 0.4ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:48:48 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"234234", "longitude"=>"234232342"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:51
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
  [1m[36mSurvivor Update (0.4ms)[0m  [1m[33mUPDATE "survivors" SET "latitude" = ?, "longitude" = ?, "updated_at" = ? WHERE "survivors"."id" = ?[0m  [["latitude", 234234.0], ["longitude", 234232342.0], ["updated_at", "2019-03-19 22:48:48.719307"], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:32
  [1m[35m (118.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
Completed 200 OK in 127ms (Views: 0.9ms | ActiveRecord: 118.7ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:50:37 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"", "longitude"=>""}, "id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:51
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
Completed 204 No Content in 6ms (ActiveRecord: 0.4ms)


Started GET "/survivors/3" for 127.0.0.1 at 2019-03-19 19:50:41 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:51
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.2ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:51:09 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"", "longitude"=>""}, "id"=>"3"}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:53
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
Completed 422 Unprocessable Entity in 72ms (Views: 1.2ms | ActiveRecord: 2.6ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:52:36 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:33: syntax error, unexpected ',', expecting =>
...    render json: {@survivor.id, @survivor.latitude, @survivo...
...                              ^
/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:33: syntax error, unexpected '}', expecting '.' or &. or :: or '['
....latitude, @survivor.longitude}
...                              ^):
  
app/controllers/survivors_controller.rb:33: syntax error, unexpected ',', expecting =>
app/controllers/survivors_controller.rb:33: syntax error, unexpected '}', expecting '.' or &. or :: or '['
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:56:24 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:33: syntax error, unexpected '}', expecting =>
...itude: #{@survivor.longitude}"}
...                              ^):
  
app/controllers/survivors_controller.rb:33: syntax error, unexpected '}', expecting =>
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 19:57:09 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"3", "longitude"=>"3"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:53
  [1m[35m (0.8ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
  [1m[36mSurvivor Update (2.1ms)[0m  [1m[33mUPDATE "survivors" SET "latitude" = ?, "longitude" = ?, "updated_at" = ? WHERE "survivors"."id" = ?[0m  [["latitude", 3.0], ["longitude", 3.0], ["updated_at", "2019-03-19 22:57:09.994886"], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:32
  [1m[35m (133.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
Completed 200 OK in 218ms (Views: 1.0ms | ActiveRecord: 141.7ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 20:02:36 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Roberto Eustaquio", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "quantity"=>10}, {"type"=>"Food", "quantity"=>6}]}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (3.6ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Roberto Eustaquio"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824], ["created_at", "2019-03-19 23:02:36.551191"], ["updated_at", "2019-03-19 23:02:36.551191"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (114.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 201 Created in 175ms (Views: 0.9ms | ActiveRecord: 119.7ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-19 20:17:28 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Roberto Eustaquio", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.6ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["name", "Roberto Eustaquio"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824], ["created_at", "2019-03-19 23:17:28.250309"], ["updated_at", "2019-03-19 23:17:28.250309"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.254311"], ["updated_at", "2019-03-19 23:17:28.254311"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.256585"], ["updated_at", "2019-03-19 23:17:28.256585"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.258511"], ["updated_at", "2019-03-19 23:17:28.258511"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.260398"], ["updated_at", "2019-03-19 23:17:28.260398"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.262475"], ["updated_at", "2019-03-19 23:17:28.262475"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.9ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.264476"], ["updated_at", "2019-03-19 23:17:28.264476"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.8ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.269709"], ["updated_at", "2019-03-19 23:17:28.269709"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.8ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.274429"], ["updated_at", "2019-03-19 23:17:28.274429"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.9ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.279656"], ["updated_at", "2019-03-19 23:17:28.279656"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.9ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Water"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.285081"], ["updated_at", "2019-03-19 23:17:28.285081"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.8ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.290922"], ["updated_at", "2019-03-19 23:17:28.290922"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (1.0ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.296340"], ["updated_at", "2019-03-19 23:17:28.296340"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.8ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.302267"], ["updated_at", "2019-03-19 23:17:28.302267"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (1.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.313526"], ["updated_at", "2019-03-19 23:17:28.313526"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.9ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.319732"], ["updated_at", "2019-03-19 23:17:28.319732"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["type", "Food"], ["survivor_id", 9], ["created_at", "2019-03-19 23:17:28.325597"], ["updated_at", "2019-03-19 23:17:28.325597"]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (239.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 201 Created in 441ms (Views: 0.6ms | ActiveRecord: 253.0ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 20:22:40 -0300
  
ActionController::RoutingError (undefined local variable or method `privateamount' for SurvivorsController:Class
Did you mean?  private):
  
app/controllers/survivors_controller.rb:50:in `<class:SurvivorsController>'
app/controllers/survivors_controller.rb:1:in `<main>'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 20:22:55 -0300
  
ActionController::RoutingError (undefined local variable or method `privateamount' for SurvivorsController:Class
Did you mean?  private):
  
app/controllers/survivors_controller.rb:50:in `<class:SurvivorsController>'
app/controllers/survivors_controller.rb:1:in `<main>'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 20:23:23 -0300
  
ActionController::RoutingError (undefined local variable or method `privateamount' for SurvivorsController:Class
Did you mean?  private):
  
app/controllers/survivors_controller.rb:50:in `<class:SurvivorsController>'
app/controllers/survivors_controller.rb:1:in `<main>'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 20:23:41 -0300
  
ActionController::RoutingError (undefined local variable or method `privateamount' for SurvivorsController:Class
Did you mean?  private):
  
app/controllers/survivors_controller.rb:50:in `<class:SurvivorsController>'
app/controllers/survivors_controller.rb:1:in `<main>'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 20:23:57 -0300
  
ActionController::RoutingError (undefined local variable or method `privateamount' for SurvivorsController:Class
Did you mean?  private):
  
app/controllers/survivors_controller.rb:50:in `<class:SurvivorsController>'
app/controllers/survivors_controller.rb:1:in `<main>'
Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 20:24:32 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"3", "longitude"=>"3"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:53
  [1m[35m (0.5ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
  [1m[35m (0.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
Completed 200 OK in 65ms (Views: 1.4ms | ActiveRecord: 3.3ms)


Started PATCH "/survivors/3" for 127.0.0.1 at 2019-03-19 20:24:48 -0300
Processing by SurvivorsController#update as */*
  Parameters: {"survivor"=>{"latitude"=>"3", "longitude"=>"3"}, "id"=>"3"}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:53
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
  [1m[35m (0.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:32
Completed 200 OK in 36ms (Views: 1.7ms | ActiveRecord: 2.5ms)


Started GET "/survivors/3" for 127.0.0.1 at 2019-03-19 20:25:06 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:53
Completed 200 OK in 7ms (Views: 1.0ms | ActiveRecord: 0.2ms)


Started GET "/survivors/3" for 127.0.0.1 at 2019-03-19 20:25:08 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"3"}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:53
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 0.2ms)


Started GET "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 20:30:08 -0300
  
AbstractController::ActionNotFound (The action 'index' could not be found for ApplicationController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 20:30:23 -0300
  
AbstractController::ActionNotFound (The action 'index' could not be found for ApplicationController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 20:31:31 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
  [1m[36mSurvivor Update (1.4ms)[0m  [1m[33mUPDATE "survivors" SET "infection_mark" = ?, "updated_at" = ? WHERE "survivors"."id" = ?[0m  [["infection_mark", 1], ["updated_at", "2019-03-19 23:31:31.553801"], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:41
  [1m[35m (117.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
Completed 200 OK in 156ms (Views: 0.3ms | ActiveRecord: 121.8ms)


Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 20:31:33 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
  [1m[36mSurvivor Update (0.4ms)[0m  [1m[33mUPDATE "survivors" SET "infection_mark" = ?, "updated_at" = ? WHERE "survivors"."id" = ?[0m  [["infection_mark", 2], ["updated_at", "2019-03-19 23:31:33.637142"], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:41
  [1m[35m (134.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
Completed 200 OK in 147ms (Views: 0.9ms | ActiveRecord: 134.9ms)


Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 20:31:44 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
  [1m[36mSurvivor Update (0.3ms)[0m  [1m[33mUPDATE "survivors" SET "infection_mark" = ?, "updated_at" = ? WHERE "survivors"."id" = ?[0m  [["infection_mark", 3], ["updated_at", "2019-03-19 23:31:44.455665"], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:41
  [1m[35m (159.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
Completed 200 OK in 168ms (Views: 0.6ms | ActiveRecord: 159.8ms)


Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-19 20:31:49 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
  [1m[36mSurvivor Update (0.3ms)[0m  [1m[33mUPDATE "survivors" SET "infection_mark" = ?, "updated_at" = ? WHERE "survivors"."id" = ?[0m  [["infection_mark", 4], ["updated_at", "2019-03-19 23:31:49.492350"], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:41
  [1m[35m (114.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
Completed 200 OK in 121ms (Views: 0.3ms | ActiveRecord: 114.7ms)


Started GET "/reports/non-infected" for 127.0.0.1 at 2019-03-19 20:41:27 -0300
  
AbstractController::ActionNotFound (The action 'index' could not be found for ApplicationController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/non-infected" for 127.0.0.1 at 2019-03-19 20:41:43 -0300
  
AbstractController::ActionNotFound (The action 'index' could not be found for ApplicationController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/infected" for 127.0.0.1 at 2019-03-19 20:41:53 -0300
  
AbstractController::ActionNotFound (The action 'index' could not be found for ApplicationController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/infected_survivors" for 127.0.0.1 at 2019-03-19 20:42:44 -0300
  
AbstractController::ActionNotFound (The action 'infected_survivors' could not be found for ReportsController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/infected_survivors" for 127.0.0.1 at 2019-03-19 20:43:32 -0300
Processing by ReportsController#infected_survivors as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:38
  [1m[35m (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  â†³ app/controllers/reports_controller.rb:42
Completed 200 OK in 8ms (Views: 0.2ms | ActiveRecord: 0.8ms)


Started GET "/reports/non_infected_survivors" for 127.0.0.1 at 2019-03-19 20:43:58 -0300
  
AbstractController::ActionNotFound (The action 'index' could not be found for ApplicationController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/not_infected_survivors" for 127.0.0.1 at 2019-03-19 20:44:16 -0300
Processing by ReportsController#not_infected_survivors as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  â†³ app/controllers/reports_controller.rb:42
Completed 200 OK in 73ms (Views: 0.7ms | ActiveRecord: 2.1ms)


Started GET "/reports/uninfected_survivors" for 127.0.0.1 at 2019-03-19 20:45:22 -0300
  
AbstractController::ActionNotFound (The action 'uninfected_survivors' could not be found for ReportsController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/uninfected_survivors" for 127.0.0.1 at 2019-03-19 20:45:38 -0300
Processing by ReportsController#uninfected_survivors as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  â†³ app/controllers/reports_controller.rb:42
Completed 200 OK in 25ms (Views: 4.1ms | ActiveRecord: 1.6ms)


Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-19 20:46:08 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:16
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Food"]]
  â†³ app/controllers/reports_controller.rb:17
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Medication"]]
  â†³ app/controllers/reports_controller.rb:18
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Ammunition"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:34
Completed 200 OK in 71ms (Views: 0.4ms | ActiveRecord: 8.2ms)


Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-19 20:46:31 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" IN (SELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3))[0m
  â†³ app/controllers/reports_controller.rb:25
Completed 200 OK in 72ms (Views: 0.7ms | ActiveRecord: 3.8ms)


Started GET "/reports/all_survivors_count" for 127.0.0.1 at 2019-03-19 20:48:27 -0300
  
AbstractController::ActionNotFound (The action 'index' could not be found for ApplicationController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade_resources" for 127.0.0.1 at 2019-03-19 20:51:17 -0300
  
AbstractController::ActionNotFound (The action 'trade_resources' could not be found for TradesController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{
  "trade": {
    "survivor_1": {
      "id": 1234,
      "resources": [
        {
          "type": 'Water',
          "amount": 1
        },
        {
          "type": 'Food',
          "amount": 2
        }
      ]
    },
    "survivor_2": {
      "id": 4321,
      "resources": [
        {
          "type": 'Medication',
          "amount": 2
        },
        {
          "type": 'Ammunition',
          "amount": 6
        }
      ]
    }
  }
}
Started POST "/trade_resources" for 127.0.0.1 at 2019-03-19 20:51:38 -0300
  
AbstractController::ActionNotFound (The action 'trade_resources' could not be found for TradesController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Error occurred while parsing request parameters.
Contents:

{
  "trade": {
    "survivor_1": {
      "id": 3,
      "resources": [
        {
          "type": 'Water',
          "amount": 1
        },
        {
          "type": 'Food',
          "amount": 2
        }
      ]
    },
    "survivor_2": {
      "id": 2,
      "resources": [
        {
          "type": 'Medication',
          "amount": 2
        },
        {
          "type": 'Ammunition',
          "amount": 6
        }
      ]
    }
  }
}
Started POST "/trade_resources" for 127.0.0.1 at 2019-03-19 20:52:10 -0300
  
AbstractController::ActionNotFound (The action 'trade_resources' could not be found for TradesController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade_resources" for 127.0.0.1 at 2019-03-19 20:52:43 -0300
  
AbstractController::ActionNotFound (The action 'trade_resources' could not be found for TradesController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade" for 127.0.0.1 at 2019-03-19 20:54:47 -0300
  
ActionController::RoutingError (No route matches [POST] "/trade"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade" for 127.0.0.1 at 2019-03-19 20:56:20 -0300
  
ActionController::RoutingError (No route matches [POST] "/trade"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade" for 127.0.0.1 at 2019-03-19 20:57:33 -0300
  
ActionController::RoutingError (No route matches [POST] "/trade"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trades" for 127.0.0.1 at 2019-03-19 20:57:38 -0300
  
ActionController::RoutingError (No route matches [POST] "/trades"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade" for 127.0.0.1 at 2019-03-19 20:57:45 -0300
  
ActionController::RoutingError (No route matches [POST] "/trade"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade" for 127.0.0.1 at 2019-03-19 20:57:57 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor_1"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor_2"=>{"id"=>"3", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Unpermitted parameters: :survivor_1, :survivor_2
Completed 500 Internal Server Error in 96ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/trades_controller.rb:3:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-19 20:58:30 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"3", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 409 Conflict in 129ms (Views: 1.4ms | ActiveRecord: 2.6ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-19 20:58:52 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 409 Conflict in 9ms (Views: 0.3ms | ActiveRecord: 0.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-19 20:59:03 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"4", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (11.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 4], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (1.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 4], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 4], ["type", "Medication"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 163ms (Views: 0.3ms | ActiveRecord: 17.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-19 21:40:08 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"999", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 999], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 10ms (Views: 0.3ms | ActiveRecord: 1.1ms)


Started GET "/999" for 127.0.0.1 at 2019-03-19 22:24:49 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
  
AbstractController::ActionNotFound (The action 'index' could not be found for ApplicationController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:25:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/survivors/999" for 127.0.0.1 at 2019-03-19 22:25:01 -0300
Processing by SurvivorsController#show as */*
  Parameters: {"id"=>"999", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 999], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
Completed 404 Not Found in 10ms (Views: 0.6ms | ActiveRecord: 2.1ms)


  [1m[35m (1.7ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (108.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (142.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateSurvivors (20190318235202)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "age" integer, "gender" varchar(1), "latitude" float, "longitude" float, "infection_mark" integer DEFAULT 0)[0m
  â†³ db/migrate/20190318235202_create_survivors.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235202"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (104.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateResources (20190318235618)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "resources" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar, "survivor_id" integer, CONSTRAINT "fk_rails_a37fe4a4e9"
FOREIGN KEY ("survivor_id")
  REFERENCES "survivors" ("id")
)[0m
  â†³ db/migrate/20190318235618_create_resources.rb:3
  [1m[35m (0.3ms)[0m  [1m[35mCREATE  INDEX "index_resources_on_survivor_id" ON "resources" ("survivor_id")[0m
  â†³ db/migrate/20190318235618_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (2.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235618"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (132.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-03-20 15:23:58.440005"], ["updated_at", "2019-03-20 15:23:58.440005"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (91.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Started POST "/survivors" for 127.0.0.1 at 2019-03-20 13:38:25 -0300
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Roberto Eustaquio", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.5ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Roberto Eustaquio"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (103.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 201 Created in 207ms (Views: 1.2ms | ActiveRecord: 109.5ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-20 13:42:10 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Roberto Eustaquio", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.5ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Roberto Eustaquio"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (154.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mResource Load (2.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:21
Completed 201 Created in 285ms (Views: 31.6ms | ActiveRecord: 164.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-20 13:42:45 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn/app/controllers/survivors_controller.rb:21: syntax error, unexpected tIVAR, expecting end
...nder json: @survivor @resources, status: :created
...                     ^~~~~~~~~~):
  
app/controllers/survivors_controller.rb:21: syntax error, unexpected tIVAR, expecting end
Started GET "/survivors/" for 127.0.0.1 at 2019-03-20 15:37:17 -0300
Processing by SurvivorsController#index as */*
  Parameters: {"survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT "survivors".* FROM "survivors"[0m
  â†³ app/controllers/survivors_controller.rb:7
Completed 200 OK in 20ms (Views: 18.2ms | ActiveRecord: 1.8ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-20 17:03:48 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 422 Unprocessable Entity in 86ms (Views: 0.3ms | ActiveRecord: 4.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-21 14:56:00 -0300
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"999", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 999], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 20ms (Views: 0.4ms | ActiveRecord: 1.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-21 14:56:12 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 4ms (Views: 0.3ms | ActiveRecord: 0.2ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-21 14:56:26 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (14.1ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (14.0ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.5ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (2.0ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (2.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (1.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (147.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 201 Created in 343ms (Views: 0.7ms | ActiveRecord: 186.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-21 14:56:32 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 31ms (Views: 0.3ms | ActiveRecord: 1.6ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-21 14:56:46 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 2], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Update All (121.9ms)[0m  [1m[33mUPDATE "resources" SET "survivor_id" = 2 WHERE "resources"."id" = ?[0m  [["id", 33]]
  â†³ app/models/trade.rb:68
  [1m[36mResource Update All (131.8ms)[0m  [1m[33mUPDATE "resources" SET "survivor_id" = 3 WHERE "resources"."id" = ?[0m  [["id", 17]]
  â†³ app/models/trade.rb:69
Completed 200 OK in 279ms (Views: 0.3ms | ActiveRecord: 256.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-21 15:13:18 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 8ms (Views: 0.2ms | ActiveRecord: 1.0ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-21 15:43:43 -0300
Error occurred while parsing request parameters.
Contents:

{
    "survivor": 
    {
        "name": "Jose", 
        "age": "25", 
        "gender": "M", 
        "latitude": "-84.3879824", 
        "longitude": "-84.3879824",
    }
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
    "survivor": 
    {
        "name": "Jose", 
        "age": "25", 
        "gender": "M", 
        "latitude": "-84.3879824", 
        "longitude": "-84.3879824",
    }
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-21 15:44:20 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Error occurred while parsing request parameters.
Contents:

{
    "survivor": 
    {
        "name": "Jose", 
        "age": "25", 
        "gender": "M", 
        "latitude": "-84.3879824", 
        "longitude": "-84.3879824",
    }
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
    "survivor": 
    {
        "name": "Jose", 
        "age": "25", 
        "gender": "M", 
        "latitude": "-84.3879824", 
        "longitude": "-84.3879824",
    }
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/survivors" for 127.0.0.1 at 2019-03-21 15:44:38 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824"}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 409 Conflict in 2ms (Views: 0.4ms | ActiveRecord: 0.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-21 17:23:15 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 9ms (Views: 0.3ms | ActiveRecord: 1.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-21 17:23:21 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 2], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Update All (147.7ms)[0m  [1m[33mUPDATE "resources" SET "survivor_id" = 2 WHERE "resources"."id" = ?[0m  [["id", 17]]
  â†³ app/models/trade.rb:68
  [1m[36mResource Update All (276.9ms)[0m  [1m[33mUPDATE "resources" SET "survivor_id" = 3 WHERE "resources"."id" = ?[0m  [["id", 18]]
  â†³ app/models/trade.rb:69
Completed 200 OK in 486ms (Views: 0.7ms | ActiveRecord: 427.1ms)


Started GET "/reports/infected_survivors" for 127.0.0.1 at 2019-03-21 21:30:07 -0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by ReportsController#infected_survivors as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:38
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  â†³ app/controllers/reports_controller.rb:42
Completed 200 OK in 45ms (Views: 8.3ms | ActiveRecord: 4.6ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-21 21:35:52 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.6ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Water"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.1ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "survivor_id") VALUES (?, ?)[0m  [["type", "Food"], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (135.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 201 Created in 230ms (Views: 0.8ms | ActiveRecord: 148.2ms)


Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-21 21:36:31 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
  [1m[36mSurvivor Update (6.9ms)[0m  [1m[33mUPDATE "survivors" SET "infection_mark" = ? WHERE "survivors"."id" = ?[0m  [["infection_mark", 1], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:41
  [1m[35m (428.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
Completed 200 OK in 466ms (Views: 0.6ms | ActiveRecord: 435.9ms)


Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-21 21:36:34 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
  [1m[36mSurvivor Update (0.5ms)[0m  [1m[33mUPDATE "survivors" SET "infection_mark" = ? WHERE "survivors"."id" = ?[0m  [["infection_mark", 2], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:41
  [1m[35m (140.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
Completed 200 OK in 155ms (Views: 0.3ms | ActiveRecord: 141.2ms)


Started POST "/survivors/3/report_infection" for 127.0.0.1 at 2019-03-21 21:36:35 -0300
Processing by SurvivorsController#report_infection as */*
  Parameters: {"id"=>"3", "survivor"=>{}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/survivors_controller.rb:54
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
  [1m[36mSurvivor Update (0.6ms)[0m  [1m[33mUPDATE "survivors" SET "infection_mark" = ? WHERE "survivors"."id" = ?[0m  [["infection_mark", 3], ["id", 3]]
  â†³ app/controllers/survivors_controller.rb:41
  [1m[35m (110.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:41
Completed 200 OK in 120ms (Views: 0.5ms | ActiveRecord: 111.0ms)


Started GET "/reports/infected_survivors" for 127.0.0.1 at 2019-03-21 21:36:40 -0300
Processing by ReportsController#infected_survivors as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:38
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  â†³ app/controllers/reports_controller.rb:42
Completed 200 OK in 4ms (Views: 0.3ms | ActiveRecord: 0.6ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-22 14:11:38 -0300
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Error occurred while parsing request parameters.
Contents:

{
    "survivor": 
    {
        "name": "Jose", 
        "age": "25", 
        "gender": "M", 
        "latitude": "-84.3879824", 
        "longitude": "-84.3879824",
}
  
ActionDispatch::Http::Parameters::ParseError (767: unexpected token at '{
    "survivor": 
    {
        "name": "Jose", 
        "age": "25", 
        "gender": "M", 
        "latitude": "-84.3879824", 
        "longitude": "-84.3879824",
}'):
  
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:117:in `rescue in parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:111:in `parse_formatted_parameters'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:381:in `block in POST'
rack (2.0.6) lib/rack/request.rb:59:in `fetch'
rack (2.0.6) lib/rack/request.rb:59:in `fetch_header'
actionpack (5.2.2.1) lib/action_dispatch/http/request.rb:380:in `POST'
actionpack (5.2.2.1) lib/action_dispatch/http/parameters.rb:55:in `parameters'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:290:in `_wrapper_enabled?'
actionpack (5.2.2.1) lib/action_controller/metal/params_wrapper.rb:244:in `process_action'
activerecord (5.2.2.1) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.2.1) lib/abstract_controller/base.rb:134:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started GET "/reports/infected_survivors" for 127.0.0.1 at 2019-03-22 14:49:17 -0300
Processing by ReportsController#infected_survivors as */*
  Parameters: {"report"=>{}}
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:38
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  â†³ app/controllers/reports_controller.rb:42
Completed 200 OK in 7ms (Views: 0.3ms | ActiveRecord: 1.2ms)


Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-22 15:01:38 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:34
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:18
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:44
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Food"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:44
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Medication"]]
  â†³ app/controllers/reports_controller.rb:20
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:44
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Ammunition"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:44
Completed 200 OK in 50ms (Views: 0.9ms | ActiveRecord: 7.7ms)


Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-22 16:53:06 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" IN (SELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3))[0m
  â†³ app/controllers/reports_controller.rb:27
Completed 200 OK in 40ms (Views: 0.5ms | ActiveRecord: 2.9ms)


Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-22 21:18:13 -0300
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" IN (SELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3))[0m
  â†³ app/controllers/reports_controller.rb:27
Completed 200 OK in 144ms (Views: 1.0ms | ActiveRecord: 12.5ms)


Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-22 21:19:51 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" IN (SELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3))[0m
  â†³ app/controllers/reports_controller.rb:27
Completed 200 OK in 28ms (Views: 0.7ms | ActiveRecord: 1.6ms)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (105.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (98.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateSurvivors (20190318235202)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "age" integer, "gender" varchar(1), "latitude" float, "longitude" float, "infection_mark" integer DEFAULT 0)[0m
  â†³ db/migrate/20190318235202_create_survivors.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235202"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (71.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateResources (20190323003320)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "resources" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar, "amount" integer, "survivor_id_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, CONSTRAINT "fk_rails_82867be951"
FOREIGN KEY ("survivor_id_id")
  REFERENCES "survivor_ids" ("id")
)[0m
  â†³ db/migrate/20190323003320_create_resources.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "index_resources_on_survivor_id_id" ON "resources" ("survivor_id_id")[0m
  â†³ db/migrate/20190323003320_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190323003320"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (73.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-03-23 00:34:33.066774"], ["updated_at", "2019-03-23 00:34:33.066774"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (68.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (114.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (108.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateSurvivors (20190318235202)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "age" integer, "gender" varchar(1), "latitude" float, "longitude" float, "infection_mark" integer DEFAULT 0)[0m
  â†³ db/migrate/20190318235202_create_survivors.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235202"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (84.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateResources (20190323003320)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "resources" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar, "amount" integer, "survivor_id_id" integer, CONSTRAINT "fk_rails_82867be951"
FOREIGN KEY ("survivor_id_id")
  REFERENCES "survivor_ids" ("id")
)[0m
  â†³ db/migrate/20190323003320_create_resources.rb:3
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_resources_on_survivor_id_id" ON "resources" ("survivor_id_id")[0m
  â†³ db/migrate/20190323003320_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190323003320"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (89.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-03-23 00:38:15.875719"], ["updated_at", "2019-03-23 00:38:15.875719"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (91.6ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 21:44:57 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 28ms (ActiveRecord: 1.0ms)


  
ActiveRecord::AssociationTypeMismatch (Resource(#70291304290920) expected, got {"resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]} which is an instance of ActiveSupport::HashWithIndifferentAccess(#47048514404240)):
  
app/controllers/survivors_controller.rb:18:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 21:47:20 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 38ms (ActiveRecord: 3.2ms)


  
ActiveRecord::AssociationTypeMismatch (Resource(#70291234420200) expected, got {"type"=>"Water", "amount"=>10} which is an instance of ActiveSupport::HashWithIndifferentAccess(#47048514404240)):
  
app/controllers/survivors_controller.rb:18:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 21:58:59 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 21ms (ActiveRecord: 1.3ms)


  
ActiveRecord::AssociationTypeMismatch (Resource(#70291305592680) expected, got {"resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]} which is an instance of ActiveSupport::HashWithIndifferentAccess(#47048514404240)):
  
app/controllers/survivors_controller.rb:18:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 21:59:51 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `resources_params' for #<ActionController::Parameters:0x00005594acc6ac00>):
  
app/controllers/survivors_controller.rb:18:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:00:38 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 27ms (ActiveRecord: 1.6ms)


  
ActiveRecord::AssociationTypeMismatch (Resource(#70291233586100) expected, got {"type"=>"Water", "amount"=>10} which is an instance of ActiveSupport::HashWithIndifferentAccess(#47048514404240)):
  
app/controllers/survivors_controller.rb:18:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:01:47 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/controllers/survivors_controller.rb:59:in `[]'
app/controllers/survivors_controller.rb:59:in `survivor_params'
app/controllers/survivors_controller.rb:18:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:04:04 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 32ms (ActiveRecord: 4.3ms)


  
ActiveRecord::AssociationTypeMismatch (Resource(#70291234039100) expected, got {"type"=>"Water", "amount"=>10} which is an instance of ActiveSupport::HashWithIndifferentAccess(#47048514404240)):
  
app/controllers/survivors_controller.rb:18:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:14:43 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 78ms (ActiveRecord: 5.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'survivor_id' for Water.):
  
app/controllers/survivors_controller.rb:18:in `create'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (108.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (54.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateSurvivors (20190318235202)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "age" integer, "gender" varchar(1), "latitude" float, "longitude" float, "infection_mark" integer DEFAULT 0)[0m
  â†³ db/migrate/20190318235202_create_survivors.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235202"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (101.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateResources (20190323003320)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (6.7ms)[0m  [1m[35mCREATE TABLE "resources" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar, "amount" integer, "survivor_id_id" integer, CONSTRAINT "fk_rails_82867be951"
FOREIGN KEY ("survivor_id_id")
  REFERENCES "survivor_ids" ("id")
)[0m
  â†³ db/migrate/20190323003320_create_resources.rb:3
  [1m[35m (0.5ms)[0m  [1m[35mCREATE  INDEX "index_resources_on_survivor_id_id" ON "resources" ("survivor_id_id")[0m
  â†³ db/migrate/20190323003320_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190323003320"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (86.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-03-23 01:16:58.923865"], ["updated_at", "2019-03-23 01:16:58.923865"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (64.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (121.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (74.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateSurvivors (20190318235202)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "age" integer, "gender" varchar(1), "latitude" float, "longitude" float, "infection_mark" integer DEFAULT 0)[0m
  â†³ db/migrate/20190318235202_create_survivors.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235202"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (83.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateResources (20190323003320)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "resources" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar, "amount" integer, "survivor_id_id" integer, CONSTRAINT "fk_rails_82867be951"
FOREIGN KEY ("survivor_id_id")
  REFERENCES "survivor_ids" ("id")
)[0m
  â†³ db/migrate/20190323003320_create_resources.rb:3
  [1m[35m (0.3ms)[0m  [1m[35mCREATE  INDEX "index_resources_on_survivor_id_id" ON "resources" ("survivor_id_id")[0m
  â†³ db/migrate/20190323003320_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190323003320"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (93.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-03-23 01:18:56.555885"], ["updated_at", "2019-03-23 01:18:56.555885"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (81.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (97.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (108.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateSurvivors (20190318235202)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "age" integer, "gender" varchar(1), "latitude" float, "longitude" float, "infection_mark" integer DEFAULT 0)[0m
  â†³ db/migrate/20190318235202_create_survivors.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235202"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (97.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateResources (20190323012036)
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "resources" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar, "amount" integer, "survivor_id" integer, CONSTRAINT "fk_rails_a37fe4a4e9"
FOREIGN KEY ("survivor_id")
  REFERENCES "survivors" ("id")
)[0m
  â†³ db/migrate/20190323012036_create_resources.rb:3
  [1m[35m (0.3ms)[0m  [1m[35mCREATE  INDEX "index_resources_on_survivor_id" ON "resources" ("survivor_id")[0m
  â†³ db/migrate/20190323012036_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190323012036"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (116.3ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-03-23 01:21:30.172800"], ["updated_at", "2019-03-23 01:21:30.172800"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (69.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:22:55 -0300
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.4ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (2.4ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 10], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Food"], ["amount", 6], ["survivor_id", 1]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (172.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 201 Created in 289ms (Views: 2.3ms | ActiveRecord: 181.7ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:26:23 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.5ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 10], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Food"], ["amount", 6], ["survivor_id", 2]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (141.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 201 Created in 220ms (Views: 0.8ms | ActiveRecord: 146.1ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:26:47 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/controllers/survivors_controller.rb:22: syntax error, unexpected else
      else
      ^~~~):
  
app/controllers/survivors_controller.rb:22: syntax error, unexpected else
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:27:07 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/controllers/survivors_controller.rb:22: syntax error, unexpected else
      else
      ^~~~):
  
app/controllers/survivors_controller.rb:22: syntax error, unexpected else
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:27:31 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/controllers/survivors_controller.rb:22: syntax error, unexpected else
      else
      ^~~~):
  
app/controllers/survivors_controller.rb:22: syntax error, unexpected else
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:27:39 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (1.9ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 10], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Food"], ["amount", 6], ["survivor_id", 3]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (132.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 222ms (ActiveRecord: 138.0ms)


  
NoMethodError (undefined method `merge' for #<Survivor:0x00007fdbf065ae68>):
  
app/controllers/survivors_controller.rb:21:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:30:40 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.4ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 10], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Food"], ["amount", 6], ["survivor_id", 4]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (271.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 500 Internal Server Error in 326ms (ActiveRecord: 275.1ms)


  
NoMethodError (undefined method `merge' for #<Survivor:0x00005594ac86f290>):
  
app/controllers/survivors_controller.rb:21:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:31:05 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.5ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 10], ["survivor_id", 5]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Food"], ["amount", 6], ["survivor_id", 5]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (87.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 233ms (ActiveRecord: 92.7ms)


  
NoMethodError (undefined method `merge' for #<Survivor:0x00005594aba43c70>):
  
app/controllers/survivors_controller.rb:21:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:31:16 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.5ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 10], ["survivor_id", 6]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Food"], ["amount", 6], ["survivor_id", 6]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (73.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 500 Internal Server Error in 452ms (ActiveRecord: 80.9ms)


  
NameError (undefined local variable or method `resources_attributes' for #<SurvivorsController:0x00007fdbe83335d0>
Did you mean?  resources_params):
  
app/controllers/survivors_controller.rb:21:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:31:44 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.5ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 10], ["survivor_id", 7]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Food"], ["amount", 6], ["survivor_id", 7]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (132.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 7]]
  â†³ app/controllers/survivors_controller.rb:21
Completed 201 Created in 235ms (Views: 17.9ms | ActiveRecord: 140.3ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:32:26 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/controllers/survivors_controller.rb:21: syntax error, unexpected ',', expecting =>
...@survivor, @survivor.resources, status: :created
...                              ^):
  
app/controllers/survivors_controller.rb:21: syntax error, unexpected ',', expecting =>
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:33:01 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.6ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 10], ["survivor_id", 8]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Food"], ["amount", 6], ["survivor_id", 8]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (121.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 500 Internal Server Error in 196ms (ActiveRecord: 125.6ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/controllers/survivors_controller.rb:21:in `create'
Started POST "/survivors" for 127.0.0.1 at 2019-03-22 22:33:13 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Food", "amount"=>6}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (1.2ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 10], ["survivor_id", 9]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mFood Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Food"], ["amount", 6], ["survivor_id", 9]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (170.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 201 Created in 253ms (Views: 1.4ms | ActiveRecord: 176.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-22 22:35:35 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 2], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Update All (132.0ms)[0m  [1m[33mUPDATE "resources" SET "survivor_id" = 2 WHERE "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:68
  [1m[36mResource Update All (94.3ms)[0m  [1m[33mUPDATE "resources" SET "survivor_id" = 3 WHERE "resources"."id" = ?[0m  [["id", 3]]
  â†³ app/models/trade.rb:69
Completed 200 OK in 301ms (Views: 0.4ms | ActiveRecord: 235.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-22 22:36:00 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>10}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 11ms (Views: 0.3ms | ActiveRecord: 1.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-22 22:36:05 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 13ms (Views: 0.3ms | ActiveRecord: 1.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-22 22:36:14 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>2}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 11ms (Views: 0.3ms | ActiveRecord: 1.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-22 22:36:21 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (7.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 2], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Update All (140.4ms)[0m  [1m[33mUPDATE "resources" SET "survivor_id" = 2 WHERE "resources"."id" = ?[0m  [["id", 3]]
  â†³ app/models/trade.rb:68
  [1m[36mResource Update All (131.4ms)[0m  [1m[33mUPDATE "resources" SET "survivor_id" = 3 WHERE "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:69
Completed 200 OK in 307ms (Views: 0.3ms | ActiveRecord: 280.6ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-22 22:37:45 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3333", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3333], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 7ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-22 22:39:04 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>133}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1333}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 26ms (Views: 0.3ms | ActiveRecord: 0.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:01:42 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>133}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Water", "amount"=>1333}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 39ms (ActiveRecord: 7.7ms)


  
ArgumentError (wrong number of arguments (given 4, expected 1)):
  
app/models/trade.rb:4:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:03:54 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor_1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "quantity"=>1}, {"type"=>"Medication", "quantity"=>1}]}, "survivor_2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "quantity"=>6}]}}}
Unpermitted parameters: :survivor_1, :survivor_2
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/trades_controller.rb:3:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:04:26 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "quantity"=>1}, {"type"=>"Medication", "quantity"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "quantity"=>6}]}}}
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Unpermitted parameter: :quantity
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.4ms)


  
ArgumentError (wrong number of arguments (given 4, expected 1)):
  
app/models/trade.rb:4:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:04:45 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.4ms)


  
ArgumentError (wrong number of arguments (given 4, expected 1)):
  
app/models/trade.rb:4:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:06:13 -0300
  
AbstractController::ActionNotFound (The action 'trade' could not be found for TradesController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:06:27 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:5:in `initialize'
app/controllers/trades_controller.rb:5:in `new'
app/controllers/trades_controller.rb:5:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:08:32 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:5:in `initialize'
app/controllers/trades_controller.rb:5:in `new'
app/controllers/trades_controller.rb:5:in `trade'
Started POST "/trade_resources" for 127.0.0.1 at 2019-03-22 23:09:05 -0300
  
ActionController::RoutingError (No route matches [POST] "/trade_resources"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:12:31 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 1], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 1], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 1], ["type", "Medication"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 72ms (Views: 0.3ms | ActiveRecord: 6.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:15:24 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:5:in `initialize'
app/controllers/trades_controller.rb:3:in `new'
app/controllers/trades_controller.rb:3:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:20:31 -0300
  
NameError (uninitialized constant Trade::Mongoid):
  
app/models/trade.rb:2:in `<class:Trade>'
app/models/trade.rb:1:in `<main>'
Started POST "/trade" for 127.0.0.1 at 2019-03-22 23:20:55 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Completed 500 Internal Server Error in 25ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:5:in `initialize'
app/controllers/trades_controller.rb:3:in `new'
app/controllers/trades_controller.rb:3:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:29:01 -0300
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:5:in `initialize'
app/controllers/trades_controller.rb:3:in `new'
app/controllers/trades_controller.rb:3:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:32:09 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Completed 500 Internal Server Error in 381ms (ActiveRecord: 0.0ms)


  
NameError (undefined local variable or method `type' for #<TradesController:0x00005590d2ee02b0>):
  
app/controllers/trades_controller.rb:15:in `trade_params'
app/controllers/trades_controller.rb:3:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:32:54 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:5:in `initialize'
app/controllers/trades_controller.rb:3:in `new'
app/controllers/trades_controller.rb:3:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:34:21 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/controllers/trades_controller.rb:17: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/trades_controller.rb:17: syntax error, unexpected end-of-input, expecting end
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:35:21 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 257ms (ActiveRecord: 2.5ms)


  
ArgumentError (wrong number of arguments (given 4, expected 1)):
  
app/models/trade.rb:4:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:36:59 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 48ms (ActiveRecord: 2.0ms)


  
ArgumentError (wrong number of arguments (given 4, expected 0)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:5:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:39:27 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 37ms (ActiveRecord: 1.5ms)


  
ArgumentError (wrong number of arguments (given 4, expected 0)):
  
app/models/trade.rb:6:in `initialize'
app/models/trade.rb:6:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:40:48 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (1.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 62ms (ActiveRecord: 5.9ms)


  
ArgumentError (wrong number of arguments (given 4, expected 0)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:5:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:42:33 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 48ms (ActiveRecord: 3.7ms)


  
ArgumentError (wrong number of arguments (given 4, expected 0)):
  
app/models/trade.rb:6:in `initialize'
app/models/trade.rb:6:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:43:03 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 48ms (ActiveRecord: 3.7ms)


  
NameError (undefined local variable or method `params' for #<Trade:0x00007ff7f47492c8 @survivor1=nil, @survivor2=nil>):
  
app/models/trade.rb:9:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:43:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 1], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 1], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 1], ["type", "Medication"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 361ms (Views: 5.3ms | ActiveRecord: 4.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:51:24 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 1], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 1], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 1], ["type", "Medication"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 49ms (Views: 0.3ms | ActiveRecord: 3.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:51:35 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"133", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 133], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 9ms (Views: 0.3ms | ActiveRecord: 0.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:52:11 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"133", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 133], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 20ms (Views: 0.4ms | ActiveRecord: 2.4ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:53:55 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 61ms (ActiveRecord: 0.4ms)


  
NoMethodError (undefined method `infected?' for :survivor_1:Symbol):
  
app/models/trade.rb:36:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:54:46 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 104ms (ActiveRecord: 7.0ms)


  
NoMethodError (undefined method `name' for :survivor_1:Symbol):
  
app/models/trade.rb:37:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:55:07 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 74ms (ActiveRecord: 2.8ms)


  
NoMethodError (undefined method `name' for :survivor_1:Symbol):
  
app/models/trade.rb:37:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:55:35 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.7ms)


  
NoMethodError (undefined method `name' for :survivor_1:Symbol):
  
app/models/trade.rb:37:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:55:42 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 51ms (ActiveRecord: 2.2ms)


  
NoMethodError (undefined method `name' for :survivor1:Symbol):
  
app/models/trade.rb:37:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:58:39 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 52ms (ActiveRecord: 1.5ms)


  
NoMethodError (undefined method `name' for :survivor1:Symbol):
  
app/models/trade.rb:37:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 08:59:56 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 71ms (ActiveRecord: 7.2ms)


  
NameError (`@#<Survivor:0x00007ff7f46a7f40>' is not allowed as an instance variable name):
  
app/models/trade.rb:36:in `instance_variable_get'
app/models/trade.rb:36:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 09:00:48 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (1.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 69ms (ActiveRecord: 4.7ms)


  
ArgumentError (wrong number of arguments (given 4, expected 0)):
  
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 09:01:03 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 51ms (ActiveRecord: 2.0ms)


  
ArgumentError (wrong number of arguments (given 4, expected 0)):
  
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:12:12 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 37ms (ActiveRecord: 1.9ms)


  
NoMethodError (undefined method `infected?' for :survivor_1:Symbol):
  
app/models/trade.rb:36:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:12:32 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 147ms (ActiveRecord: 2.8ms)


  
NoMethodError (undefined method `name' for :survivor_1:Symbol):
  
app/models/trade.rb:37:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:13:34 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (2.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 77ms (ActiveRecord: 5.0ms)


  
NoMethodError (undefined method `id' for :survivor_1:Symbol):
  
app/models/trade.rb:37:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:13:52 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 124ms (ActiveRecord: 3.6ms)


  
RuntimeError (Survivor 1is infected):
  
app/models/trade.rb:37:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:15:07 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (1.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 78ms (ActiveRecord: 6.1ms)


  
NameError (undefined local variable or method `id' for #<Trade:0x00007ff7ec9818b8>):
  
app/models/trade.rb:37:in `block in validate_survivors'
app/models/trade.rb:31:in `each'
app/models/trade.rb:31:in `each_with_index'
app/models/trade.rb:31:in `validate_survivors'
app/models/trade.rb:20:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:18:04 -0300
  
AbstractController::ActionNotFound (The action 'trade' could not be found for TradesController):
  
actionpack (5.2.2.1) lib/abstract_controller/base.rb:129:in `process'
actionpack (5.2.2.1) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.2.1) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.2.1) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.2.1) lib/action_dispatch/routing/route_set.rb:840:in `call'
rack (2.0.6) lib/rack/etag.rb:25:in `call'
rack (2.0.6) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.6) lib/rack/head.rb:12:in `call'
activerecord (5.2.2.1) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.2.1) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.2.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade_resources" for 127.0.0.1 at 2019-03-23 13:19:08 -0300
  
ActionController::RoutingError (No route matches [POST] "/trade_resources"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade_resources" for 127.0.0.1 at 2019-03-23 13:20:04 -0300
  
ActionController::RoutingError (No route matches [POST] "/trade_resources"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade_resources" for 127.0.0.1 at 2019-03-23 13:20:35 -0300
  
ActionController::RoutingError (No route matches [POST] "/trade_resources"):
  
actionpack (5.2.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:65:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.2.1) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.2.1) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.2.1) lib/rails/rack/logger.rb:26:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.6) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.2.1) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.6) lib/rack/sendfile.rb:111:in `call'
railties (5.2.2.1) lib/rails/engine.rb:524:in `call'
puma (3.12.0) lib/puma/configuration.rb:225:in `call'
puma (3.12.0) lib/puma/server.rb:658:in `handle_request'
puma (3.12.0) lib/puma/server.rb:472:in `process_client'
puma (3.12.0) lib/puma/server.rb:332:in `block in run'
puma (3.12.0) lib/puma/thread_pool.rb:133:in `block in spawn_thread'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:20:40 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:6:in `initialize'
app/models/trade.rb:6:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:23:26 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:5:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:24:11 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:5:in `initialize'
app/controllers/trades_controller.rb:6:in `new'
app/controllers/trades_controller.rb:6:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:28:54 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 200 OK in 51ms (Views: 0.3ms | ActiveRecord: 4.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:29:02 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Medication", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Medication"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 76ms (Views: 0.2ms | ActiveRecord: 2.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:29:20 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (5.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 21ms (Views: 0.2ms | ActiveRecord: 7.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:30:14 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 45ms (Views: 0.4ms | ActiveRecord: 2.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:30:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 1.6ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:30:20 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 13ms (Views: 0.3ms | ActiveRecord: 1.6ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:30:47 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"2", "resources"=>[{"type"=>"Food", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (8.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 2], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 2], ["type", "Food"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
Completed 200 OK in 115ms (Views: 0.3ms | ActiveRecord: 10.6ms)


Started POST "/survivors" for 127.0.0.1 at 2019-03-23 13:31:24 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Water", "amount"=>10}, {"type"=>"Ammunition", "amount"=>60}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mSurvivor Create (0.6ms)[0m  [1m[32mINSERT INTO "survivors" ("name", "age", "gender", "latitude", "longitude") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Jose"], ["age", 25], ["gender", "M"], ["latitude", -84.3879824], ["longitude", -84.3879824]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mWater Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 10], ["survivor_id", 10]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[36mAmmunition Create (0.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Ammunition"], ["amount", 60], ["survivor_id", 10]]
  â†³ app/controllers/survivors_controller.rb:20
  [1m[35m (162.6ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/controllers/survivors_controller.rb:20
Completed 201 Created in 246ms (Views: 1.3ms | ActiveRecord: 163.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:31:48 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 1.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:33:57 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:68: syntax error, unexpected ':', expecting ')'
..._resources).update_all(:amount: @survivor2.id)
...                              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:68: syntax error, unexpected ')', expecting end
...ate_all(:amount: @survivor2.id)
...                              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:69: syntax error, unexpected ':', expecting ')'
..._resources).update_all(:amount: @survivor1.id)
...                              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:69: syntax error, unexpected ')', expecting end
...ate_all(:amount: @survivor1.id)
...                              ^):
  
app/models/trade.rb:68: syntax error, unexpected ':', expecting ')'
app/models/trade.rb:68: syntax error, unexpected ')', expecting end
app/models/trade.rb:69: syntax error, unexpected ':', expecting ')'
app/models/trade.rb:69: syntax error, unexpected ')', expecting end
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:37:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 79ms (Views: 0.4ms | ActiveRecord: 4.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:37:50 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Update All (152.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 10 WHERE "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:68
  [1m[36mResource Update All (133.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 3 WHERE "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:69
Completed 200 OK in 308ms (Views: 0.3ms | ActiveRecord: 287.6ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:38:27 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 19ms (Views: 0.3ms | ActiveRecord: 2.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:38:31 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 23ms (Views: 0.3ms | ActiveRecord: 2.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:38:37 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>6}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 200 OK in 39ms (Views: 0.3ms | ActiveRecord: 2.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:38:44 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>1}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 2.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:50:02 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 56ms (ActiveRecord: 5.0ms)


  
TypeError (compared with non class/module):
  
app/models/trade.rb:80:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:53:03 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (3.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 87ms (ActiveRecord: 5.9ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/models/trade.rb:80:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:53:09 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.5ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/models/trade.rb:80:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:58:33 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"333", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 333], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 12ms (Views: 0.3ms | ActiveRecord: 1.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:58:43 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", nil], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 3ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 13:59:16 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"1", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:02:03 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:45: syntax error, unexpected tIDENTIFIER, expecting then or ';' or '\n'
...has_enough_resources??(resource)
...                       ^~~~~~~~
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:56: syntax error, unexpected end, expecting end-of-input
  end
  ^~~):
  
app/models/trade.rb:45: syntax error, unexpected tIDENTIFIER, expecting then or ';' or '\n'
app/models/trade.rb:56: syntax error, unexpected end, expecting end-of-input
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:02:41 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 43ms (ActiveRecord: 2.2ms)


  
NoMethodError (undefined method `has_enough_resources?' for :survivor1:Symbol):
  
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:44:in `each'
app/models/trade.rb:44:in `block in check_inconsistent_resources'
app/models/trade.rb:43:in `each'
app/models/trade.rb:43:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:03:24 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 41ms (ActiveRecord: 1.7ms)


  
NoMethodError (undefined method `resources_count' for #<Trade:0x00007ff7f4681480>
Did you mean?  resources_hash_2):
  
app/models/trade.rb:93:in `block in has_enough_resources?'
app/models/trade.rb:92:in `has_enough_resources?'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:44:in `each'
app/models/trade.rb:44:in `block in check_inconsistent_resources'
app/models/trade.rb:43:in `each'
app/models/trade.rb:43:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:04:04 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 47ms (ActiveRecord: 3.7ms)


  
NoMethodError (undefined method `resources' for #<Trade:0x00005590d2f558a8>
Did you mean?  resources_hash_2):
  
app/models/trade.rb:99:in `resources_count'
app/models/trade.rb:93:in `block in has_enough_resources?'
app/models/trade.rb:92:in `has_enough_resources?'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:44:in `each'
app/models/trade.rb:44:in `block in check_inconsistent_resources'
app/models/trade.rb:43:in `each'
app/models/trade.rb:43:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:09:55 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 33ms (ActiveRecord: 1.1ms)


  
NoMethodError (undefined method `has_enough_resources?' for :survivor1:Symbol):
  
app/models/trade.rb:45:in `block (2 levels) in validate_resources'
app/models/trade.rb:44:in `each'
app/models/trade.rb:44:in `block in validate_resources'
app/models/trade.rb:43:in `each'
app/models/trade.rb:43:in `validate_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:10:20 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 56ms (ActiveRecord: 2.2ms)


  
NoMethodError (undefined method `resources' for #<Trade:0x00007ff7f466e510>
Did you mean?  resources_hash_2):
  
app/models/trade.rb:109:in `resources_count'
app/models/trade.rb:103:in `block in has_enough_resources?'
app/models/trade.rb:102:in `has_enough_resources?'
app/models/trade.rb:45:in `block (2 levels) in validate_resources'
app/models/trade.rb:44:in `each'
app/models/trade.rb:44:in `block in validate_resources'
app/models/trade.rb:43:in `each'
app/models/trade.rb:43:in `validate_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:11:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:23:56 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 67ms (ActiveRecord: 3.6ms)


  
NoMethodError (undefined method `amount' for #<Resource::ActiveRecord_AssociationRelation:0x00007ff7f46cca48>):
  
app/models/trade.rb:81:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:27:17 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 55ms (ActiveRecord: 4.8ms)


  
NoMethodError (undefined method `survivor_resource' for #<Trade:0x00007ff7e80294e0>
Did you mean?  survivors):
  
app/models/trade.rb:81:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:29:36 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 56ms (ActiveRecord: 1.9ms)


  
NameError (undefined local variable or method `amount' for #<Trade:0x00007ff7ece817a0>):
  
app/models/trade.rb:80:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:31:10 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 75ms (ActiveRecord: 4.2ms)


  
NameError (undefined local variable or method `amount' for #<Trade:0x00007ff7f46a55d8>):
  
app/models/trade.rb:80:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:31:55 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 67ms (Views: 0.3ms | ActiveRecord: 4.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:34:00 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (2.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Water"], ["LIMIT", 100]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 112ms (Views: 0.3ms | ActiveRecord: 5.8ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:35:11 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (2.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 103ms (ActiveRecord: 4.5ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:80:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:38:08 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Water"], ["LIMIT", 100]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 69ms (Views: 0.3ms | ActiveRecord: 4.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:40:03 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Water"], ["LIMIT", 100]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 144ms (Views: 0.5ms | ActiveRecord: 5.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:40:22 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:81: syntax error, unexpected ')'
...  resource_type.select(amount:)
...                              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:88: syntax error, unexpected end-of-input, expecting end):
  
app/models/trade.rb:81: syntax error, unexpected ')'
app/models/trade.rb:88: syntax error, unexpected end-of-input, expecting end
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:40:30 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 103ms (ActiveRecord: 15.2ms)


  
NameError (undefined local variable or method `amount' for #<Trade:0x00005590d2d2d120>):
  
app/models/trade.rb:81:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:40:39 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Water"], ["LIMIT", 100]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 102ms (Views: 0.4ms | ActiveRecord: 4.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:41:00 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Water"], ["LIMIT", 100]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 79ms (Views: 0.3ms | ActiveRecord: 3.8ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:41:08 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[36mResource Load (1.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Water"], ["LIMIT", 100]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 97ms (Views: 1.5ms | ActiveRecord: 3.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:42:39 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 61ms (ActiveRecord: 3.0ms)


  
NameError (undefined local variable or method `amount' for #<Trade:0x00005590d2e82f70>):
  
app/models/trade.rb:80:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:42:56 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 110ms (ActiveRecord: 5.3ms)


  
NameError (undefined local variable or method `params' for #<Trade:0x00005590d1ddfc18>):
  
app/models/trade.rb:80:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:43:02 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (5.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 76ms (ActiveRecord: 5.6ms)


  
NameError (undefined local variable or method `params' for #<Trade:0x00007ff7f4796780>):
  
app/models/trade.rb:80:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:45:32 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"10", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (2.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mCACHE Survivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Water"], ["LIMIT", 100]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 119ms (Views: 0.4ms | ActiveRecord: 14.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:52:17 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>100}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
Completed 422 Unprocessable Entity in 61ms (Views: 0.4ms | ActiveRecord: 4.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:53:28 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>11}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
Completed 422 Unprocessable Entity in 18ms (Views: 0.3ms | ActiveRecord: 0.8ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:53:33 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>11}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>444}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
Completed 422 Unprocessable Entity in 9ms (Views: 0.3ms | ActiveRecord: 0.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:53:58 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>444}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
Completed 422 Unprocessable Entity in 12ms (Views: 0.3ms | ActiveRecord: 0.8ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:54:14 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>444}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 444]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 81ms (Views: 0.4ms | ActiveRecord: 5.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:54:57 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>444}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 444]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 55ms (Views: 0.2ms | ActiveRecord: 3.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:55:59 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>444}]}}}
  [1m[36mSurvivor Load (1.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:80
Completed 422 Unprocessable Entity in 81ms (Views: 0.2ms | ActiveRecord: 5.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:56:05 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1000}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>444}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
Completed 422 Unprocessable Entity in 16ms (Views: 0.3ms | ActiveRecord: 1.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:56:13 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1000}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
Completed 422 Unprocessable Entity in 11ms (Views: 0.3ms | ActiveRecord: 1.4ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:57:41 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (4.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 55ms (Views: 0.3ms | ActiveRecord: 6.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 14:59:17 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 500 Internal Server Error in 79ms (ActiveRecord: 9.1ms)


  
NameError (`@survivor_1_resources[:amount]' is not allowed as an instance variable name):
  
app/models/trade.rb:58:in `instance_variable_get'
app/models/trade.rb:58:in `block in check_trade_points'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `check_trade_points'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 15:02:50 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:79
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:49
Completed 500 Internal Server Error in 29ms (ActiveRecord: 2.5ms)


  
TypeError (no implicit conversion of Integer into Array):
  
app/models/trade.rb:47:in `+'
app/models/trade.rb:47:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 15:04:40 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:79
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:49
Completed 500 Internal Server Error in 65ms (ActiveRecord: 5.4ms)


  
TypeError (no implicit conversion of Integer into Array):
  
app/models/trade.rb:47:in `+'
app/models/trade.rb:47:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 15:04:48 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:79
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:49
Completed 500 Internal Server Error in 44ms (ActiveRecord: 3.7ms)


  
TypeError (no implicit conversion of Integer into Array):
  
app/models/trade.rb:47:in `+'
app/models/trade.rb:47:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:16:34 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 500 Internal Server Error in 137ms (ActiveRecord: 8.2ms)


  
NameError (`@survivor_1_resources[:amount]' is not allowed as an instance variable name):
  
app/models/trade.rb:58:in `instance_variable_get'
app/models/trade.rb:58:in `block in check_trade_points'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `check_trade_points'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:19:30 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 500 Internal Server Error in 63ms (ActiveRecord: 4.6ms)


  
NameError (`@survivor_1_resources[:amount]' is not allowed as an instance variable name):
  
app/models/trade.rb:59:in `instance_variable_get'
app/models/trade.rb:59:in `block in check_trade_points'
app/models/trade.rb:57:in `each'
app/models/trade.rb:57:in `check_trade_points'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:20:37 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (1.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 500 Internal Server Error in 37ms (ActiveRecord: 3.4ms)


  
NameError (`@survivor_1_resources[:amount]' is not allowed as an instance variable name):
  
app/models/trade.rb:59:in `instance_variable_get'
app/models/trade.rb:59:in `block in check_trade_points'
app/models/trade.rb:57:in `each'
app/models/trade.rb:57:in `check_trade_points'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:24:44 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 101ms (Views: 0.2ms | ActiveRecord: 7.6ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:25:13 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (4.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (6.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 321ms (Views: 0.4ms | ActiveRecord: 24.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:26:32 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:58: syntax error, unexpected tIDENTIFIER, expecting do or '{' or '('
...     puts instance_variable_get("@#{survivor}_resources").ma...
...          ^~~~~~~~~~~~~~~~~~~~~):
  
app/models/trade.rb:58: syntax error, unexpected tIDENTIFIER, expecting do or '{' or '('
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:26:45 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:58: syntax error, unexpected tIDENTIFIER, expecting do or '{' or '('
...     puts instance_variable_get("@#{survivor}_resources").map
...          ^~~~~~~~~~~~~~~~~~~~~):
  
app/models/trade.rb:58: syntax error, unexpected tIDENTIFIER, expecting do or '{' or '('
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:27:18 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 422 Unprocessable Entity in 120ms (Views: 0.8ms | ActiveRecord: 7.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:39:59 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 55ms (ActiveRecord: 3.0ms)


  
NameError (undefined local variable or method `survivor' for #<Trade:0x00007ff7e801e158>
Did you mean?  survivors
               survivor2
               survivor1
               @survivor2
               @survivor1):
  
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:41:01 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 34ms (ActiveRecord: 2.8ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/models/trade.rb:51:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:41:22 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (3.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 149ms (ActiveRecord: 6.5ms)


  
NameError (undefined local variable or method `survivor_1_points' for #<Trade:0x00005590d2853a78>
Did you mean?  @survivor1_points
               @survivor2_points):
  
app/models/trade.rb:54:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:42:44 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 56ms (ActiveRecord: 3.1ms)


  
NameError (undefined local variable or method `survivor1_points' for #<Trade:0x00007ff7f0186ec0>
Did you mean?  @survivor1_points
               @survivor2_points):
  
app/models/trade.rb:54:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:43:14 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 73ms (ActiveRecord: 7.6ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:55:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:45:29 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:85
Completed 500 Internal Server Error in 75ms (ActiveRecord: 3.1ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:56:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:46:17 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:86
Completed 500 Internal Server Error in 59ms (ActiveRecord: 5.4ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:57:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:48:38 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:86
Completed 500 Internal Server Error in 95ms (ActiveRecord: 4.7ms)


  
NameError (undefined local variable or method `resource' for #<Class:0x00007ff7eca05910>
Did you mean?  rescue):
  
app/models/resource.rb:12:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:49:21 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:86
Completed 500 Internal Server Error in 86ms (ActiveRecord: 3.2ms)


  
NoMethodError (undefined method `to_i' for [:amount]:Array
Did you mean?  to_s
               to_a
               to_h):
  
app/models/resource.rb:12:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:49:59 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:86
Completed 500 Internal Server Error in 62ms (ActiveRecord: 4.7ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/resource.rb:12:in `[]'
app/models/resource.rb:12:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:50:18 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:86
Completed 500 Internal Server Error in 134ms (ActiveRecord: 6.0ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/resource.rb:12:in `[]'
app/models/resource.rb:12:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:50:28 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:86
Completed 500 Internal Server Error in 147ms (ActiveRecord: 3.1ms)


  
NoMethodError (undefined method `survivor_resources' for #<Class:0x00007ff7e023ef30>):
  
app/models/resource.rb:12:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:53:36 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:87
Completed 500 Internal Server Error in 99ms (ActiveRecord: 5.4ms)


  
NoMethodError (undefined method `survivor_resources' for #<Class:0x00007ff80002a850>):
  
app/models/resource.rb:12:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:54:53 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:88
Completed 500 Internal Server Error in 150ms (ActiveRecord: 3.5ms)


  
NoMethodError (undefined method `survivor_resources' for #<Class:0x00005590d235a328>):
  
app/models/resource.rb:12:in `points_sum'
app/models/trade.rb:53:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:56:00 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 95ms (ActiveRecord: 16.2ms)


  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/resource.rb:12: syntax error, unexpected ']'
...   survivor_resources([amount:].to_i) * RESOURCES_POINTS[res...
...                              ^):
  
app/models/resource.rb:12: syntax error, unexpected ']'
app/models/trade.rb:88:in `valid_resources?'
app/models/trade.rb:42:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:56:13 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:88
Completed 500 Internal Server Error in 71ms (ActiveRecord: 3.3ms)


  
NoMethodError (undefined method `to_i' for [:amount]:Array
Did you mean?  to_s
               to_a
               to_h):
  
app/models/resource.rb:12:in `points_sum'
app/models/trade.rb:53:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:56:27 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:88
Completed 500 Internal Server Error in 132ms (ActiveRecord: 4.7ms)


  
NoMethodError (undefined method `survivor_resources' for #<Class:0x00007ff7ecec9258>):
  
app/models/resource.rb:12:in `points_sum'
app/models/trade.rb:53:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:57:04 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:88
Completed 500 Internal Server Error in 72ms (ActiveRecord: 2.8ms)


  
NoMethodError (undefined method `amount' for "@survivor1_resources_params":String):
  
app/models/resource.rb:12:in `points_sum'
app/models/trade.rb:53:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:57:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:88
Completed 500 Internal Server Error in 67ms (ActiveRecord: 2.8ms)


  
NoMethodError (undefined method `amount' for "@survivor1_resources_params":String):
  
app/models/resource.rb:13:in `points_sum'
app/models/trade.rb:53:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:58:51 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (4.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 75ms (ActiveRecord: 10.9ms)


  
NameError (`survivor1_resources_params' is not allowed as an instance variable name):
  
app/models/trade.rb:41:in `instance_variable_get'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 16:59:27 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
Completed 500 Internal Server Error in 55ms (ActiveRecord: 2.6ms)


  
NameError (`survivor1_resources_params' is not allowed as an instance variable name):
  
app/models/trade.rb:41:in `instance_variable_get'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:00:57 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:100
Completed 500 Internal Server Error in 48ms (ActiveRecord: 3.2ms)


  
NoMethodError (undefined method `points_sum' for #<Trade:0x00007ff7f4740a60>):
  
app/models/trade.rb:53:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:01:21 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:100
Completed 500 Internal Server Error in 51ms (ActiveRecord: 3.6ms)


  
NoMethodError (undefined method `amount' for "@survivor1_resources_params":String):
  
app/models/trade.rb:72:in `points_sum'
app/models/trade.rb:53:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:05:21 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:108: syntax error, unexpected end-of-input, expecting end):
  
app/models/trade.rb:108: syntax error, unexpected end-of-input, expecting end
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:05:45 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
Completed 500 Internal Server Error in 121ms (ActiveRecord: 2.8ms)


  
NameError (undefined local variable or method `suvivor' for #<Trade:0x00005590d24ebf48>
Did you mean?  survivor
               survivors
               survivor2
               survivor1
               @survivor2
               @survivor1):
  
app/models/trade.rb:53:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:06:30 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
Completed 500 Internal Server Error in 106ms (ActiveRecord: 3.1ms)


  
NameError (undefined local variable or method `survivor' for #<Trade:0x00005590d25a6c08>
Did you mean?  survivors
               survivor2
               survivor1
               suvivor
               @survivor2
               @survivor1):
  
app/models/trade.rb:71:in `points_sum'
app/models/trade.rb:53:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:06:43 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
Completed 500 Internal Server Error in 101ms (ActiveRecord: 4.4ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:59:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:07:35 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
Completed 500 Internal Server Error in 179ms (ActiveRecord: 13.3ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:58:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:11:29 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:100
Completed 500 Internal Server Error in 35ms (ActiveRecord: 2.8ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:58:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:13:10 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:106: syntax error, unexpected end, expecting end-of-input):
  
app/models/trade.rb:106: syntax error, unexpected end, expecting end-of-input
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:13:21 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:98
Completed 500 Internal Server Error in 56ms (ActiveRecord: 2.7ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/trade.rb:70:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:14:29 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:98
Completed 500 Internal Server Error in 67ms (ActiveRecord: 5.3ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/trade.rb:70:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:14:58 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:98
Completed 500 Internal Server Error in 59ms (ActiveRecord: 3.1ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/trade.rb:70:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:17:01 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:98
Completed 500 Internal Server Error in 41ms (ActiveRecord: 2.5ms)


  
NoMethodError (undefined method `amount' for #<Array:0x00007ff7ec65a2c0>):
  
app/models/trade.rb:70:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:17:34 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:98
Completed 500 Internal Server Error in 131ms (ActiveRecord: 8.2ms)


  
NoMethodError (undefined method `type' for #<Array:0x00007ff7f4712660>):
  
app/models/trade.rb:70:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:18:14 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:98
Completed 500 Internal Server Error in 89ms (ActiveRecord: 3.5ms)


  
NoMethodError (undefined method `resources' for #<Array:0x00005590d22eec68>
Did you mean?  rescue):
  
app/models/trade.rb:70:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:20:50 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
Completed 500 Internal Server Error in 37ms (ActiveRecord: 1.8ms)


  
NoMethodError (undefined method `resources' for #<Array:0x00007ff7e80166b0>
Did you mean?  rescue):
  
app/models/trade.rb:71:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:22:17 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
Completed 500 Internal Server Error in 38ms (ActiveRecord: 2.2ms)


  
NoMethodError (undefined method `type' for #<Array:0x00007ff7f015cc60>):
  
app/models/trade.rb:71:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:33:14 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:99
Completed 500 Internal Server Error in 108ms (ActiveRecord: 12.1ms)


  
NoMethodError (undefined method `downcase' for nil:NilClass):
  
app/models/trade.rb:71:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:34:27 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:98
Completed 500 Internal Server Error in 54ms (ActiveRecord: 3.4ms)


  
NameError (undefined local variable or method `resources' for #<Trade:0x00007ff7ecea70b8>
Did you mean?  resource):
  
app/models/trade.rb:70:in `points_sum'
app/models/trade.rb:52:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:34:37 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:98
Completed 500 Internal Server Error in 72ms (ActiveRecord: 3.3ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:58:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:35:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:100
Completed 500 Internal Server Error in 97ms (ActiveRecord: 7.1ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:58:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:36:29 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:100
Completed 500 Internal Server Error in 175ms (ActiveRecord: 12.6ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:58:in `validate_balance'
app/models/trade.rb:46:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:41:in `each'
app/models/trade.rb:41:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:38:16 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.0ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:96
Completed 500 Internal Server Error in 45ms (ActiveRecord: 3.7ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:49:in `block in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:39:07 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:96
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:96
  [1m[36mResource Update All (0.2ms)[0m  [1m[33mUPDATE "resources" SET "survivor_id" = 10 WHERE 1=0[0m
  â†³ app/models/trade.rb:84
  [1m[36mResource Update All (0.3ms)[0m  [1m[33mUPDATE "resources" SET "survivor_id" = 3 WHERE 1=0[0m
  â†³ app/models/trade.rb:85
Completed 200 OK in 78ms (Views: 0.3ms | ActiveRecord: 5.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:52:59 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:84
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 37ms (ActiveRecord: 3.0ms)


  
ArgumentError (wrong number of arguments (given 0, expected 2)):
  
app/models/trade.rb:68:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:53:16 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:84
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:84
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:71
Completed 500 Internal Server Error in 66ms (ActiveRecord: 4.4ms)


  
TypeError (no implicit conversion of Integer into Array):
  
app/models/trade.rb:71:in `-'
app/models/trade.rb:71:in `block (2 levels) in trade_resources'
app/models/trade.rb:70:in `each'
app/models/trade.rb:70:in `block in trade_resources'
app/models/trade.rb:69:in `each'
app/models/trade.rb:69:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:55:25 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:84
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 90ms (ActiveRecord: 7.2ms)


  
NoMethodError (undefined method `-' for #<Trade:0x00007ff7f0268a78>):
  
app/models/trade.rb:71:in `block (2 levels) in trade_resources'
app/models/trade.rb:70:in `each'
app/models/trade.rb:70:in `block in trade_resources'
app/models/trade.rb:69:in `each'
app/models/trade.rb:69:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 17:57:14 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:85
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:85
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:71
  [1m[36mResource Update All (128.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 9 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:72
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:71
  [1m[36mResource Update All (112.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 56 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:72
Completed 200 OK in 310ms (Views: 1.1ms | ActiveRecord: 247.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:10:06 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:103: syntax error, unexpected end, expecting end-of-input):
  
app/models/trade.rb:103: syntax error, unexpected end, expecting end-of-input
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:10:38 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:96
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:96
Completed 500 Internal Server Error in 46ms (ActiveRecord: 2.9ms)


  
NameError (undefined local variable or method `survivor' for #<Trade:0x00007ff7e8070750>
Did you mean?  survivors
               survivor2
               survivor1
               @survivor2
               @survivor1):
  
app/models/trade.rb:51:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:11:29 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:96
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:96
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 200 OK in 123ms (Views: 0.6ms | ActiveRecord: 6.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:17:22 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:87
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:87
Completed 500 Internal Server Error in 36ms (ActiveRecord: 2.2ms)


  
TypeError (#<Survivor id: 3, name: "Jose", age: 25, gender: "M", latitude: -84.3879824, longitude: -84.3879824, infection_mark: 0> is not a symbol nor a string):
  
app/models/trade.rb:69:in `instance_variable_get'
app/models/trade.rb:69:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:21:04 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:96: syntax error, unexpected end, expecting end-of-input
  end
  ^~~):
  
app/models/trade.rb:96: syntax error, unexpected end, expecting end-of-input
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:21:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:101
Completed 500 Internal Server Error in 74ms (ActiveRecord: 5.2ms)


  
TypeError (#<Survivor id: 3, name: "Jose", age: 25, gender: "M", latitude: -84.3879824, longitude: -84.3879824, infection_mark: 0> is not a symbol nor a string):
  
app/models/trade.rb:69:in `instance_variable_get'
app/models/trade.rb:69:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:23:28 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:69: syntax error, unexpected ')', expecting end
    @survivor1).each do |resource|
              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:73: syntax error, unexpected ')', expecting end
      @survivor).resources.where(type: resour...
               ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:108: syntax error, unexpected end, expecting end-of-input):
  
app/models/trade.rb:69: syntax error, unexpected ')', expecting end
app/models/trade.rb:73: syntax error, unexpected ')', expecting end
app/models/trade.rb:108: syntax error, unexpected end, expecting end-of-input
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:23:42 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:101
Completed 500 Internal Server Error in 90ms (ActiveRecord: 3.3ms)


  
NoMethodError (undefined method `each' for #<Survivor:0x00005590d279e420>):
  
app/models/trade.rb:69:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:25:55 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:101
Completed 200 OK in 47ms (Views: 0.4ms | ActiveRecord: 3.6ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:26:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
  [1m[35m (4.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:101
Completed 200 OK in 66ms (Views: 0.3ms | ActiveRecord: 6.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:27:02 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:101
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:70
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:71
Completed 500 Internal Server Error in 64ms (ActiveRecord: 3.6ms)


  
NoMethodError (undefined method `resources' for nil:NilClass
Did you mean?  rescue):
  
app/models/trade.rb:73:in `block in trade_resources'
app/models/trade.rb:69:in `each'
app/models/trade.rb:69:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:27:34 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:101
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:101
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:70
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:71
  [1m[36mResource Update All (112.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 8 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:73
  [1m[36mResource Update All (114.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 4 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:74
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:77
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:78
Completed 500 Internal Server Error in 351ms (ActiveRecord: 239.4ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:78:in `block in trade_resources'
app/models/trade.rb:76:in `each'
app/models/trade.rb:76:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:42:35 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:93
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:93
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:71
  [1m[36mResource Update All (109.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = NULL WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:72
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:78
Completed 500 Internal Server Error in 171ms (ActiveRecord: 114.6ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:78:in `block (2 levels) in trade_resources'
app/models/trade.rb:70:in `each'
app/models/trade.rb:70:in `block in trade_resources'
app/models/trade.rb:69:in `each'
app/models/trade.rb:69:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:43:18 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:93
Completed 500 Internal Server Error in 63ms (ActiveRecord: 3.3ms)


  
NoMethodError (undefined method `>=' for nil:NilClass):
  
app/models/trade.rb:93:in `valid_resources?'
app/models/trade.rb:41:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:44:41 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 53ms (ActiveRecord: 3.0ms)


  
NoMethodError (undefined method `>=' for nil:NilClass):
  
app/models/trade.rb:54:in `valid_resources?'
app/models/trade.rb:41:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:46:04 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 44ms (ActiveRecord: 0.9ms)


  
NoMethodError (undefined method `>=' for nil:NilClass):
  
app/models/trade.rb:54:in `valid_resources?'
app/models/trade.rb:41:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:46:18 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (91.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 9 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:82
  [1m[36mResource Update All (97.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 10 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:83
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (119.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 52 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:82
Completed 500 Internal Server Error in 357ms (ActiveRecord: 312.5ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:82:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:49:22 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Coca", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Coca"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 35ms (ActiveRecord: 2.2ms)


  
NoMethodError (undefined method `>=' for nil:NilClass):
  
app/models/trade.rb:54:in `valid_resources?'
app/models/trade.rb:41:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/survivors" for 127.0.0.1 at 2019-03-23 18:49:36 -0300
Processing by SurvivorsController#create as */*
  Parameters: {"survivor"=>{"name"=>"Jose", "age"=>"25", "gender"=>"M", "latitude"=>"-84.3879824", "longitude"=>"-84.3879824", "resources"=>[{"type"=>"Coca", "amount"=>10}, {"type"=>"Ammunition", "amount"=>60}]}}
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Unpermitted parameter: :resources
Unpermitted parameters: :name, :age, :gender, :latitude, :longitude
Completed 500 Internal Server Error in 77ms (ActiveRecord: 0.0ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Coca'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/controllers/survivors_controller.rb:18:in `create'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:55:59 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (97.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 9 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:85
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:88
  [1m[36mResource Update All (95.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 10 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:89
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (89.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 48 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:85
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:88
Completed 500 Internal Server Error in 387ms (ActiveRecord: 287.9ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:88:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 18:57:28 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (108.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 9 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:85)
  [1m[35m (2.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:88
  [1m[36mResource Update All (97.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 10 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:89
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (95.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 44 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:85)
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:88
Completed 500 Internal Server Error in 378ms (ActiveRecord: 308.5ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:88:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:02:07 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (131.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 9 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:86)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:89
  [1m[36mResource Update All (119.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 10 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:90
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (72.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 40 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:86)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:89
Completed 500 Internal Server Error in 409ms (ActiveRecord: 329.6ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:89:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:02:39 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (4.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (99.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 9 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:88)
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:91
  [1m[36mResource Update All (118.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 10 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:92
  [1m[35m (3.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (98.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 36 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:88)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:91
Completed 500 Internal Server Error in 491ms (ActiveRecord: 341.4ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:91:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:03:32 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (95.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 9 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:82)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:85
  [1m[36mResource Update All (106.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 5 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:86
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (107.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 32 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:82)
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:85
  [1m[36mResource Update All (123.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 36 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:86
Completed 200 OK in 529ms (Views: 0.2ms | ActiveRecord: 438.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:04:45 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (158.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 8 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:80)
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:83
  [1m[36mResource Update All (113.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 6 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Water"]]
  â†³ app/models/trade.rb:84
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (103.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 32 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:80)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:83
  [1m[36mResource Update All (89.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 36 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:84
Completed 200 OK in 566ms (Views: 0.8ms | ActiveRecord: 473.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:05:06 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (98.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 7 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
Completed 500 Internal Server Error in 219ms (ActiveRecord: 103.8ms)


  
NoMethodError (undefined method `survivor1?' for #<Trade:0x00007ff7eca05e88>
Did you mean?  survivor1
               survivors
               survivor2):
  
app/models/trade.rb:78:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:05:46 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (103.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 6 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:86)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:89
  [1m[36mResource Update All (115.5ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 7 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:90
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (75.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 32 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
DEPRECATION WARNING: Delegating exists to arel is deprecated and will be removed in Rails 6.0. (called from block (2 levels) in trade_resources at /home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:86)
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:89
Completed 500 Internal Server Error in 362ms (ActiveRecord: 303.2ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:89:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:10:03 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:81: syntax error, unexpected tSYMBEG
...0, :survivor_id => :survivor2.:id )
...                              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:88: syntax error, unexpected tSYMBEG
...0, :survivor_id => :survivor1.:id )
...                              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:108: syntax error, unexpected end-of-input, expecting end):
  
app/models/trade.rb:81: syntax error, unexpected tSYMBEG
app/models/trade.rb:88: syntax error, unexpected tSYMBEG
app/models/trade.rb:108: syntax error, unexpected end-of-input, expecting end
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:10:30 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (101.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 6 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:90
  [1m[36mResource Update All (94.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 7 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:91
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (94.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 28 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:90
Completed 500 Internal Server Error in 393ms (ActiveRecord: 298.6ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:90:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:21:23 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (111.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 6 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:90
  [1m[36mResource Update All (157.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 7 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:91
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (139.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 24 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:90
Completed 500 Internal Server Error in 464ms (ActiveRecord: 412.9ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:90:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:21:41 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (90.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 6 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:91
  [1m[36mResource Update All (115.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 7 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:92
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (92.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 20 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:76
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:91
Completed 500 Internal Server Error in 399ms (ActiveRecord: 303.6ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:91:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:21:54 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (126.5ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 6 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
Completed 500 Internal Server Error in 209ms (ActiveRecord: 130.7ms)


  
NoMethodError (undefined method `id' for :survivor2:Symbol):
  
app/models/trade.rb:88:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:22:48 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (97.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 5 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
Completed 500 Internal Server Error in 155ms (ActiveRecord: 101.4ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/models/trade.rb:88:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:23:17 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (115.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 4 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
Completed 500 Internal Server Error in 201ms (ActiveRecord: 119.6ms)


  
ActiveRecord::AssociationTypeMismatch (Resource(#70351403490500) expected, got [:type, "Water"] which is an instance of Array(#47040234723040)):
  
app/models/trade.rb:88:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:43:27 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (137.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 3 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
Completed 500 Internal Server Error in 399ms (ActiveRecord: 151.0ms)


  
ActiveRecord::AssociationTypeMismatch (Resource(#70351430454360) expected, got [:type, "Water"] which is an instance of Array(#47040234723040)):
  
app/models/trade.rb:89:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:44:11 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (96.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 2 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
Completed 500 Internal Server Error in 141ms (ActiveRecord: 98.0ms)


  
ActiveRecord::AssociationTypeMismatch (Resource(#70351430454360) expected, got [:type, "Water"] which is an instance of Array(#47040234723040)):
  
app/models/trade.rb:89:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:44:41 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:75
  [1m[36mResource Update All (97.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = 1 WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:76
Completed 500 Internal Server Error in 157ms (ActiveRecord: 102.5ms)


  
ActiveRecord::AssociationTypeMismatch (Resource(#70351467806240) expected, got [:type, "Water"] which is an instance of Array(#47040234723040)):
  
app/models/trade.rb:90:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:54:01 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 500 Internal Server Error in 64ms (ActiveRecord: 3.8ms)


  
NoMethodError (undefined method `-' for #<Trade:0x00007ff7f00f5ad8>):
  
app/models/trade.rb:84:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 19:56:36 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 500 Internal Server Error in 93ms (ActiveRecord: 4.1ms)


  
NoMethodError (undefined method `-' for #<Trade:0x00007ff7f01eeb10>):
  
app/models/trade.rb:84:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:23:32 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (2.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 191ms (ActiveRecord: 6.2ms)


  
NoMethodError (undefined method `-' for #<Trade:0x00005590d1ae7d08>):
  
app/models/trade.rb:86:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:25:47 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (1.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 146ms (ActiveRecord: 7.7ms)


  
NoMethodError (undefined method `-' for #<Trade:0x00007ff7ec9af538>):
  
app/models/trade.rb:86:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:26:04 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (3.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 40ms (ActiveRecord: 6.4ms)


  
NoMethodError (undefined method `-' for #<Trade:0x00007ff7e8022848>):
  
app/models/trade.rb:86:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:26:25 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Completed 500 Internal Server Error in 213ms (ActiveRecord: 9.4ms)


  
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
NoMethodError (undefined method `inc' for #<Resource::ActiveRecord_Relation:0x00007ff7f00aaa38>
Did you mean?  in?):
  
app/models/trade.rb:83:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:30:20 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Completed 500 Internal Server Error in 139ms (ActiveRecord: 12.9ms)


  
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
NoMethodError (undefined method `inc' for #<Resource::ActiveRecord_Relation:0x00007ff7f47daef8>
Did you mean?  in?):
  
app/models/trade.rb:83:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:31:41 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 500 Internal Server Error in 91ms (ActiveRecord: 4.0ms)


  
NoMethodError (undefined method `resource' for #<Survivor:0x00005590d1ad8600>
Did you mean?  resources
               resources=):
  
app/models/trade.rb:83:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:31:49 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? AND "resources"."survivor_id" = ? LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["survivor_id", 3], ["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Completed 500 Internal Server Error in 133ms (ActiveRecord: 5.6ms)


  
  [1m[36mCACHE Resource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? AND "resources"."survivor_id" = ? LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["survivor_id", 3], ["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
NoMethodError (undefined method `inc' for #<Resource::ActiveRecord_AssociationRelation:0x00007ff7f4588e48>
Did you mean?  in?):
  
app/models/trade.rb:83:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? AND "resources"."survivor_id" = ? LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["survivor_id", 3], ["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:46:32 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:81: syntax error, unexpected ':', expecting end
          @increment_amount: Resource.where(type: resourc...
                           ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:84: syntax error, unexpected ':', expecting end
          @increment_amount: Resource.where(type: resourc...
                           ^):
  
app/models/trade.rb:81: syntax error, unexpected ':', expecting end
app/models/trade.rb:84: syntax error, unexpected ':', expecting end
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:46:51 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 89ms (ActiveRecord: 5.1ms)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `{:amount=>1}`):
  
app/models/trade.rb:85:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:47:35 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 71ms (ActiveRecord: 2.3ms)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `{:amount=>1}`):
  
app/models/trade.rb:85:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:48:22 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 62ms (ActiveRecord: 2.3ms)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `{:amount=>1}`):
  
app/models/trade.rb:85:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:49:21 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
  [1m[36mWater Update All (105.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:85
  [1m[36mResource Load (2.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
  [1m[36mAmmunition Update All (105.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:85
Completed 200 OK in 309ms (Views: 0.7ms | ActiveRecord: 219.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-23 20:51:08 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
  [1m[36mWater Update All (99.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:85
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 218ms (ActiveRecord: 107.4ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:85:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:10:51 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 500 Internal Server Error in 160ms (ActiveRecord: 4.4ms)


  
NoMethodError (undefined method `survivor1?' for #<Trade:0x00005590d2ee2588>
Did you mean?  survivor1
               survivors
               survivor2):
  
app/models/trade.rb:80:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:11:09 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
  [1m[36mWater Update All (138.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:85
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
  [1m[36mAmmunition Update All (90.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:85
Completed 200 OK in 337ms (Views: 0.5ms | ActiveRecord: 234.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:11:27 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (3.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (4.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
  [1m[36mWater Update All (88.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:85
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
  [1m[36mAmmunition Update All (83.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:85
Completed 200 OK in 238ms (Views: 0.7ms | ActiveRecord: 184.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:12:03 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
  [1m[36mWater Update All (98.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:85
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
  [1m[36mAmmunition Update All (94.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:85
Completed 200 OK in 286ms (Views: 0.7ms | ActiveRecord: 212.4ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:12:33 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
  [1m[36mWater Update All (110.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:85
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:84
Completed 500 Internal Server Error in 269ms (ActiveRecord: 117.7ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:85:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:13:17 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:85
  [1m[36mWater Update All (103.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:86
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:80
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:85
Completed 500 Internal Server Error in 183ms (ActiveRecord: 108.8ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:86:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 11:18:45 -0300
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (7.6ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" IN (SELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3))[0m
  â†³ app/controllers/reports_controller.rb:27
Completed 200 OK in 163ms (Views: 0.5ms | ActiveRecord: 11.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:18:55 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 500 Internal Server Error in 392ms (ActiveRecord: 4.4ms)


  
NoMethodError (undefined method `exists?' for nil:NilClass):
  
app/models/trade.rb:88:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:19:14 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:91
  [1m[36mWater Update All (97.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:92
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:91
Completed 500 Internal Server Error in 246ms (ActiveRecord: 104.5ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:92:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:20:24 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:87
  [1m[36mWater Update All (106.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:88
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:87
Completed 500 Internal Server Error in 207ms (ActiveRecord: 112.0ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:88:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:21:21 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/trade.rb:86
  [1m[36mWater Create (1.2ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 0], ["survivor_id", 3]]
  â†³ app/models/trade.rb:86
  [1m[35m (110.5ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/trade.rb:86
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:87
  [1m[36mWater Update All (102.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:88
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Ammunition"], ["amount", 0], ["survivor_id", 3]]
  â†³ app/models/trade.rb:86
  [1m[35m (88.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/trade.rb:86
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:87
  [1m[36mAmmunition Update All (114.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 23]]
  â†³ app/models/trade.rb:88
Completed 200 OK in 541ms (Views: 0.3ms | ActiveRecord: 423.8ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:22:33 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/trade.rb:89
  [1m[36mWater Create (0.9ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 0], ["survivor_id", 3]]
  â†³ app/models/trade.rb:89
  [1m[35m (82.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/trade.rb:89
  [1m[36mResource Load (0.9ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:91
  [1m[36mWater Update All (116.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:92
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/trade.rb:89
  [1m[36mAmmunition Create (0.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Ammunition"], ["amount", 0], ["survivor_id", 3]]
  â†³ app/models/trade.rb:89
  [1m[35m (82.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/trade.rb:89
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:91
  [1m[36mAmmunition Update All (96.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 25]]
  â†³ app/models/trade.rb:92
Completed 200 OK in 488ms (Views: 0.3ms | ActiveRecord: 385.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:23:03 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mWater Update All (115.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:93
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mAmmunition Update All (97.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 25]]
  â†³ app/models/trade.rb:93
Completed 200 OK in 353ms (Views: 0.3ms | ActiveRecord: 221.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:24:20 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ?[0m  [["type", "Water"], ["survivor_id", 10]]
  â†³ app/models/trade.rb:89
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mWater Update All (113.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:93
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ?[0m  [["type", "Ammunition"], ["survivor_id", 10]]
  â†³ app/models/trade.rb:89
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
Completed 500 Internal Server Error in 185ms (ActiveRecord: 118.7ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:93:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:24:45 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mWater Update All (97.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:93
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
Completed 500 Internal Server Error in 223ms (ActiveRecord: 104.6ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:93:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:26:08 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mWater Update All (110.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:93
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/trade.rb:90
  [1m[36mAmmunition Create (1.3ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Ammunition"], ["amount", 0], ["survivor_id", 3]]
  â†³ app/models/trade.rb:90
  [1m[35m (104.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/trade.rb:90
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mAmmunition Update All (93.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 26]]
  â†³ app/models/trade.rb:93
Completed 200 OK in 425ms (Views: 1.0ms | ActiveRecord: 318.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:26:24 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (9.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mWater Update All (117.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:93
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mAmmunition Update All (117.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 26]]
  â†³ app/models/trade.rb:93
Completed 200 OK in 267ms (Views: 0.2ms | ActiveRecord: 247.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:26:35 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (2.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mWater Update All (79.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:93
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mAmmunition Update All (87.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 26]]
  â†³ app/models/trade.rb:93
Completed 200 OK in 226ms (Views: 0.3ms | ActiveRecord: 172.4ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:26:45 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (2.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mWater Update All (109.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:93
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:92
  [1m[36mAmmunition Update All (92.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 26]]
  â†³ app/models/trade.rb:93
Completed 200 OK in 276ms (Views: 0.3ms | ActiveRecord: 206.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:30:04 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mWater Update All (104.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:93
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mAmmunition Update All (109.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 26]]
  â†³ app/models/trade.rb:93
Completed 200 OK in 282ms (Views: 0.8ms | ActiveRecord: 218.8ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:30:50 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/trade.rb:90
  [1m[36mWater Create (0.6ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Water"], ["amount", 0], ["survivor_id", 3]]
  â†³ app/models/trade.rb:90
  [1m[35m (83.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/trade.rb:90
Completed 500 Internal Server Error in 182ms (ActiveRecord: 89.8ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:93:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:31:23 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
Completed 500 Internal Server Error in 120ms (ActiveRecord: 5.5ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:93:in `block (2 levels) in trade_resources'
app/models/trade.rb:79:in `each'
app/models/trade.rb:79:in `block in trade_resources'
app/models/trade.rb:78:in `each'
app/models/trade.rb:78:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:32:12 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
  [1m[36mResource Load (1.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mWater Update All (224.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:93
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mAmmunition Update All (90.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 26]]
  â†³ app/models/trade.rb:93
Completed 200 OK in 423ms (Views: 1.0ms | ActiveRecord: 321.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:33:44 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 200 OK in 63ms (Views: 0.3ms | ActiveRecord: 4.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:34:43 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 200 OK in 70ms (Views: 0.2ms | ActiveRecord: 3.4ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:35:09 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 4]]
  â†³ app/models/trade.rb:50
Completed 200 OK in 64ms (Views: 0.2ms | ActiveRecord: 2.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:36:03 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (1.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 3], ["type", "Water"], ["LIMIT", 1]]
  â†³ app/models/trade.rb:50
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["survivor_id", 10], ["type", "Ammunition"], ["LIMIT", 5]]
  â†³ app/models/trade.rb:50
Completed 500 Internal Server Error in 40ms (ActiveRecord: 3.3ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:54:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:36:24 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 42ms (ActiveRecord: 3.0ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:49:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:36:33 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 200 OK in 25ms (Views: 0.3ms | ActiveRecord: 1.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:37:01 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 200 OK in 32ms (Views: 0.4ms | ActiveRecord: 1.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:40:09 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 200 OK in 71ms (Views: 0.3ms | ActiveRecord: 4.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:41:49 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:82
  [1m[36mWater Update All (107.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:86
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:82
Completed 500 Internal Server Error in 286ms (ActiveRecord: 117.3ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:86:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:43:02 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mWater Update All (108.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:87
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/trade.rb:85
  [1m[36mAmmunition Create (0.5ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Ammunition"], ["amount", 0], ["survivor_id", 3]]
  â†³ app/models/trade.rb:85
  [1m[35m (75.0ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/trade.rb:85
Completed 500 Internal Server Error in 295ms (ActiveRecord: 188.8ms)


  
NoMethodError (undefined method `increment!' for nil:NilClass):
  
app/models/trade.rb:87:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:44:03 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mWater Update All (90.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:87
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mAmmunition Update All (95.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 28]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 213ms (Views: 0.4ms | ActiveRecord: 187.4ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:46:15 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mWater Update All (114.5ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:87
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (103.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 28]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 334ms (Views: 0.4ms | ActiveRecord: 222.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:46:43 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mWater Update All (107.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:87
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (109.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 28]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 286ms (Views: 0.5ms | ActiveRecord: 220.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:49:11 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mWater Update All (99.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:87
  [1m[36mResource Load (2.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (94.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 28]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 292ms (Views: 0.4ms | ActiveRecord: 200.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:52:07 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mWater Update All (104.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:87
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (101.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 28]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 287ms (Views: 0.3ms | ActiveRecord: 211.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:53:16 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:77
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:80
  [1m[36mWater Update All (94.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (99.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 28]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 258ms (Views: 0.5ms | ActiveRecord: 197.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:53:29 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:77
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:80
  [1m[36mWater Update All (110.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (109.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 28]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 248ms (Views: 0.3ms | ActiveRecord: 221.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:53:38 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:77
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:80
  [1m[36mWater Update All (101.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (92.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 28]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 231ms (Views: 0.6ms | ActiveRecord: 197.4ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:53:46 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:77
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:80
  [1m[36mWater Update All (91.5ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (88.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 28]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 209ms (Views: 0.3ms | ActiveRecord: 182.0ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:54:39 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (1.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:77
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:80
  [1m[36mWater Update All (96.5ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ app/models/trade.rb:84
  [1m[36mAmmunition Create (0.4ms)[0m  [1m[32mINSERT INTO "resources" ("type", "amount", "survivor_id") VALUES (?, ?, ?)[0m  [["type", "Ammunition"], ["amount", 0], ["survivor_id", 3]]
  â†³ app/models/trade.rb:84
  [1m[35m (74.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ app/models/trade.rb:84
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (100.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 349ms (Views: 0.5ms | ActiveRecord: 275.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:55:05 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:77
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:80
  [1m[36mWater Update All (97.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (99.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 227ms (Views: 0.5ms | ActiveRecord: 199.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:56:18 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 39ms (ActiveRecord: 1.6ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:49:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:56:23 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:77
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:80
  [1m[36mWater Update All (112.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mAmmunition Update All (104.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:87
Completed 200 OK in 238ms (Views: 0.2ms | ActiveRecord: 219.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 11:59:49 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 36ms (ActiveRecord: 3.0ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:00:24 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 65ms (ActiveRecord: 2.5ms)


  
NameError (`@survivor1.id' is not allowed as an instance variable name):
  
app/models/trade.rb:75:in `instance_variable_get'
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:01:09 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:75: syntax error, unexpected ')', expecting end
...pe], survivor_id: survivor.id)).first
...                              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:105: syntax error, unexpected end, expecting end-of-input):
  
app/models/trade.rb:75: syntax error, unexpected ')', expecting end
app/models/trade.rb:105: syntax error, unexpected end, expecting end-of-input
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:01:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 85ms (ActiveRecord: 5.0ms)


  
NoMethodError (undefined method `id' for :survivor1:Symbol):
  
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:01:33 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 83ms (ActiveRecord: 2.7ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/trade.rb:75:in `[]'
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:01:48 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 57ms (ActiveRecord: 3.0ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/trade.rb:75:in `[]'
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:01:56 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:75: syntax error, unexpected tSYMBEG
...type], survivor_id: :survivor.:id).first
...                              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:105: syntax error, unexpected end, expecting end-of-input):
  
app/models/trade.rb:75: syntax error, unexpected tSYMBEG
app/models/trade.rb:105: syntax error, unexpected end, expecting end-of-input
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:03:38 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 40ms (ActiveRecord: 3.2ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/trade.rb:75:in `[]'
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:03:50 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 35ms (ActiveRecord: 3.1ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/trade.rb:75:in `[]'
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:06:44 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:77: syntax error, unexpected tIDENTIFIER, expecting ')'
...type], survivor_id: '@'survivor.id).first
...                       ^~~~~~~~
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:77: syntax error, unexpected ')', expecting end
...], survivor_id: '@'survivor.id).first
...                              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:107: syntax error, unexpected end, expecting end-of-input):
  
app/models/trade.rb:77: syntax error, unexpected tIDENTIFIER, expecting ')'
app/models/trade.rb:77: syntax error, unexpected ')', expecting end
app/models/trade.rb:107: syntax error, unexpected end, expecting end-of-input
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:07:20 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:56
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:56
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 0], ["LIMIT", 1]]
  â†³ app/models/trade.rb:77
Completed 500 Internal Server Error in 67ms (ActiveRecord: 3.8ms)


  
NoMethodError (undefined method `decrement!' for nil:NilClass):
  
app/models/trade.rb:78:in `block (2 levels) in trade_resources'
app/models/trade.rb:76:in `each'
app/models/trade.rb:76:in `block in trade_resources'
app/models/trade.rb:75:in `each'
app/models/trade.rb:75:in `trade_resources'
app/models/trade.rb:24:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:10:44 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 0], ["LIMIT", 1]]
  â†³ app/models/trade.rb:75
Completed 500 Internal Server Error in 46ms (ActiveRecord: 4.1ms)


  
NoMethodError (undefined method `decrement' for nil:NilClass):
  
app/models/trade.rb:76:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:11:08 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 0], ["LIMIT", 1]]
  â†³ app/models/trade.rb:76
Completed 500 Internal Server Error in 44ms (ActiveRecord: 3.9ms)


  
NoMethodError (undefined method `decrement' for nil:NilClass):
  
app/models/trade.rb:77:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:12:21 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 83ms (ActiveRecord: 3.8ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/trade.rb:75:in `[]'
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:12:38 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 59ms (ActiveRecord: 3.6ms)


  
NameError (undefined local variable or method `id' for #<Trade:0x00007f442026c580>):
  
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:13:00 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 52ms (ActiveRecord: 3.7ms)


  
NoMethodError (undefined method `id' for :survivor1:Symbol):
  
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:13:37 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 51ms (ActiveRecord: 3.1ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:14:11 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:75: `@|' is not allowed as an instance variable name
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:75: syntax error, unexpected end-of-input, expecting end
        puts @|survidor|.id
             ^):
  
app/models/trade.rb:75: `@|' is not allowed as an instance variable name
app/models/trade.rb:75: syntax error, unexpected end-of-input, expecting end
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:14:44 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 40ms (ActiveRecord: 3.3ms)


  
NameError (undefined local variable or method `survidor' for #<Trade:0x00007f443074f100>
Did you mean?  survivor
               survivors
               survivor2
               survivor1
               @survivor2
               @survivor1):
  
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:15:37 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:75: syntax error, unexpected '}', expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END
        puts survivor{id:}
                         ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:91: syntax error, unexpected end, expecting '}'
      end
      ^~~
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:106: syntax error, unexpected end-of-input, expecting end):
  
app/models/trade.rb:75: syntax error, unexpected '}', expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END
app/models/trade.rb:91: syntax error, unexpected end, expecting '}'
app/models/trade.rb:106: syntax error, unexpected end-of-input, expecting end
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:15:50 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 52ms (ActiveRecord: 3.8ms)


  
NoMethodError (undefined method `survivor' for #<Trade:0x00007f44241c00b0>
Did you mean?  survivors
               survivor2
               survivor1):
  
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:16:02 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:75: syntax error, unexpected '{', expecting end
        puts :survivor{:id}
                      ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:96: syntax error, unexpected end, expecting end-of-input
  end
  ^~~):
  
app/models/trade.rb:75: syntax error, unexpected '{', expecting end
app/models/trade.rb:96: syntax error, unexpected end, expecting end-of-input
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:16:12 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 69ms (ActiveRecord: 3.5ms)


  
NoMethodError (undefined method `survivor' for #<Trade:0x00007f4424012f38>
Did you mean?  survivors
               survivor2
               survivor1):
  
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:16:29 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 83ms (ActiveRecord: 5.2ms)


  
NoMethodError (undefined method `survivor' for #<Trade:0x00007f4420329838>
Did you mean?  survivors
               survivor2
               survivor1):
  
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:16:38 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 83ms (ActiveRecord: 4.6ms)


  
NoMethodError (undefined method `survivor' for #<Trade:0x00007f44242983e8>
Did you mean?  survivors
               survivor2
               survivor1):
  
app/models/trade.rb:75:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:16:50 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (1.1ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 0], ["LIMIT", 1]]
  â†³ app/models/trade.rb:76
Completed 500 Internal Server Error in 63ms (ActiveRecord: 5.4ms)


  
NoMethodError (undefined method `decrement!' for nil:NilClass):
  
app/models/trade.rb:77:in `block (2 levels) in trade_resources'
app/models/trade.rb:74:in `each'
app/models/trade.rb:74:in `block in trade_resources'
app/models/trade.rb:73:in `each'
app/models/trade.rb:73:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:22:55 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:76
  [1m[36mWater Update All (96.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:77
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:79
  [1m[36mCACHE Resource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:82
  [1m[36mWater Update All (98.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:83
  [1m[36mResource Load (1.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:76
  [1m[36mAmmunition Update All (107.5ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:77
  [1m[36mResource Load (4.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:85
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mAmmunition Update All (82.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:89
Completed 200 OK in 520ms (Views: 0.5ms | ActiveRecord: 395.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:23:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:76
  [1m[36mWater Update All (71.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:77
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:79
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:82
  [1m[36mWater Update All (113.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:83
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:76
  [1m[36mAmmunition Update All (90.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:77
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:85
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:88
  [1m[36mAmmunition Update All (109.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:89
Completed 200 OK in 481ms (Views: 0.2ms | ActiveRecord: 388.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:27:55 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:55
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:55
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:77
  [1m[36mWater Update All (111.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:78
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:80
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:83
  [1m[36mWater Update All (106.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:84
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:77
  [1m[36mAmmunition Update All (107.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:78
  [1m[36mResource Load (1.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:86
  [1m[36mCACHE Resource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:89
  [1m[36mAmmunition Update All (91.9ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:90
Completed 200 OK in 531ms (Views: 0.8ms | ActiveRecord: 422.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 12:29:20 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 36ms (ActiveRecord: 3.7ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:49:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 19:04:03 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:54
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:54
Completed 500 Internal Server Error in 53ms (ActiveRecord: 3.1ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:49:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 19:09:48 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:91
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:91
Completed 500 Internal Server Error in 37ms (ActiveRecord: 3.0ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:49:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 19:23:50 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1999}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:91
Completed 422 Unprocessable Entity in 36ms (Views: 0.3ms | ActiveRecord: 2.6ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 19:26:12 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:91
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:91
Completed 500 Internal Server Error in 29ms (ActiveRecord: 1.0ms)


  
RuntimeError (Resources points is not balanced both sides):
  
app/models/trade.rb:49:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 19:26:56 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:92
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:92
Completed 422 Unprocessable Entity in 39ms (Views: 0.4ms | ActiveRecord: 2.9ms)


Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-24 19:55:16 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:34
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:18
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:44
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Food"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:44
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Medication"]]
  â†³ app/controllers/reports_controller.rb:20
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:44
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Ammunition"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:44
Completed 200 OK in 22ms (Views: 0.3ms | ActiveRecord: 2.7ms)


Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-24 20:22:56 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:37
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Food"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Medication"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Ammunition"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
Completed 200 OK in 26ms (Views: 0.4ms | ActiveRecord: 3.9ms)


Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-24 20:26:04 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:35
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:45
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Food"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:45
  [1m[35m (0.8ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Medication"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:45
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Ammunition"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:45
Completed 500 Internal Server Error in 307ms (ActiveRecord: 4.1ms)


  
NameError (undefined local variable or method `resource' for #<ReportsController:0x00007f44201d3ad8>
Did you mean?  rescue):
  
app/controllers/reports_controller.rb:23:in `resources_by_survivor'
Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-24 20:26:24 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:35
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:45
  [1m[35m (0.7ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Food"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:45
  [1m[35m (1.6ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Medication"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:45
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Ammunition"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:45
Completed 500 Internal Server Error in 315ms (ActiveRecord: 4.8ms)


  
NameError (undefined local variable or method `resource' for #<ReportsController:0x00007f4420394250>
Did you mean?  rescue):
  
app/controllers/reports_controller.rb:23:in `resources_by_survivor'
Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-24 20:27:06 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:34
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:44
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Food"]]
  â†³ app/controllers/reports_controller.rb:19
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:44
Completed 500 Internal Server Error in 24ms (Views: 0.3ms | ActiveRecord: 2.6ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  
app/controllers/reports_controller.rb:21:in `block in resources_by_survivor'
app/controllers/reports_controller.rb:18:in `each'
app/controllers/reports_controller.rb:18:in `resources_by_survivor'
Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-24 20:28:12 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:35
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:19
Completed 500 Internal Server Error in 265ms (ActiveRecord: 1.8ms)


  
NameError (undefined local variable or method `averages' for #<ReportsController:0x00007f44203a9c18>):
  
app/controllers/reports_controller.rb:20:in `block in resources_by_survivor'
app/controllers/reports_controller.rb:18:in `each'
app/controllers/reports_controller.rb:18:in `resources_by_survivor'
Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-24 20:28:37 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:37
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Food"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Medication"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Ammunition"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
Completed 500 Internal Server Error in 280ms (ActiveRecord: 3.1ms)


  
NameError (undefined local variable or method `averages' for #<ReportsController:0x000055e061dbcd28>):
  
app/controllers/reports_controller.rb:25:in `resources_by_survivor'
Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-24 20:28:41 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:37
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Food"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Medication"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.4ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Ammunition"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
Completed 500 Internal Server Error in 221ms (ActiveRecord: 2.0ms)


  
NameError (undefined local variable or method `averages' for #<ReportsController:0x00007f4420121040>):
  
app/controllers/reports_controller.rb:25:in `resources_by_survivor'
Started GET "/reports/resources_by_survivor" for 127.0.0.1 at 2019-03-24 20:28:59 -0300
Processing by ReportsController#resources_by_survivor as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:37
  [1m[35m (0.6ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Water"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Food"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Medication"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM("resources"."amount") FROM "resources" WHERE "resources"."type" = ?[0m  [["type", "Ammunition"]]
  â†³ app/controllers/reports_controller.rb:21
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:47
Completed 200 OK in 32ms (Views: 0.4ms | ActiveRecord: 3.8ms)


Started GET "/reports/infected_survivors" for 127.0.0.1 at 2019-03-24 20:45:46 -0300
Processing by ReportsController#infected_survivors as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:39
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:53
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  â†³ app/controllers/reports_controller.rb:57
Completed 200 OK in 15ms (Views: 0.3ms | ActiveRecord: 1.5ms)


Started GET "/reports/uninfected_survivors" for 127.0.0.1 at 2019-03-24 20:45:52 -0300
Processing by ReportsController#uninfected_survivors as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:39
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors" WHERE (infection_mark < 3)[0m
  â†³ app/controllers/reports_controller.rb:49
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "survivors"[0m
  â†³ app/controllers/reports_controller.rb:57
Completed 200 OK in 4ms (Views: 0.2ms | ActiveRecord: 0.8ms)


Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 20:46:18 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (3.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:39
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" IN (SELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3))[0m
  â†³ app/controllers/reports_controller.rb:32
Completed 200 OK in 63ms (Views: 0.3ms | ActiveRecord: 5.5ms)


Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 20:49:47 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:39
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" IN (SELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)) LIMIT ?[0m  [["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Completed 500 Internal Server Error in 52ms (ActiveRecord: 1.7ms)


  
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" IN (SELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)) LIMIT ?[0m  [["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
NoMethodError (undefined method `points_sum' for #<Resource::ActiveRecord_Relation:0x00007f44203f67e8>):
  
app/controllers/reports_controller.rb:32:in `lost_infected_points'
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."survivor_id" IN (SELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)) LIMIT ?[0m  [["LIMIT", 11]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/lib/ruby/gems/2.6.0/gems/activerecord-5.2.2.1/lib/active_record/log_subscriber.rb:98
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 20:50:30 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:43
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:32
Completed 500 Internal Server Error in 30ms (ActiveRecord: 1.2ms)


  
NoMethodError (undefined method `in' for #<Class:0x00007f4420037d78>
Did you mean?  in?):
  
app/controllers/reports_controller.rb:33:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 20:51:26 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:44
Completed 500 Internal Server Error in 44ms (ActiveRecord: 2.0ms)


  
NoMethodError (undefined method `points_sum' for #<Class:0x00007f4420464fb8>):
  
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 20:55:09 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/controllers/reports_controller.rb:65: syntax error, unexpected end, expecting end-of-input):
  
app/controllers/reports_controller.rb:65: syntax error, unexpected end, expecting end-of-input
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 20:55:28 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:44
  [1m[36mResource Load (3.0ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" IN (SELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3))[0m
  â†³ app/controllers/reports_controller.rb:34
Completed 500 Internal Server Error in 239ms (ActiveRecord: 10.6ms)


  
NameError (undefined local variable or method `each' for #<ReportsController:0x00007f442048cc20>):
  
app/controllers/reports_controller.rb:35:in `block in lost_infected_points'
app/controllers/reports_controller.rb:34:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 20:57:29 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/controllers/reports_controller.rb:65: syntax error, unexpected end, expecting end-of-input):
  
app/controllers/reports_controller.rb:65: syntax error, unexpected end, expecting end-of-input
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 20:57:38 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:44
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
Completed 500 Internal Server Error in 54ms (ActiveRecord: 1.1ms)


  
NoMethodError (undefined method `in' for #<Class:0x00007f4420079ea8>
Did you mean?  in?):
  
app/controllers/reports_controller.rb:35:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 20:59:21 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:44
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/models/resource.rb:20
Completed 500 Internal Server Error in 38ms (ActiveRecord: 3.1ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/resource.rb:20:in `points_sum'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:14:56 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 158ms (ActiveRecord: 4.0ms)


  
NoMethodError (undefined method `points_sum' for #<ReportsController:0x00007f44201e3c08>):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:15:15 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 175ms (ActiveRecord: 3.4ms)


  
NoMethodError (undefined method `points_sum' for #<ReportsController:0x00007f44242d21b0>):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:15:57 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 92ms (ActiveRecord: 4.8ms)


  
NoMethodError (undefined method `points_sum' for #<Class:0x00007f442426c9c8>):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:16:36 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 74ms (ActiveRecord: 2.8ms)


  
NoMethodError (undefined method `points_sum' for #<Class:0x00007f443068f8a0>):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:17:12 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 76ms (ActiveRecord: 2.6ms)


  
NoMethodError (undefined method `points_sum' for #<Class:0x00007f44204796e8>):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:18:05 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 228ms (ActiveRecord: 3.7ms)


  
NameError (undefined local variable or method `lost_points' for #<ReportsController:0x00007f4420204368>
Did you mean?  lost_infected_points):
  
app/controllers/reports_controller.rb:40:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:18:40 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 200 OK in 66ms (Views: 0.3ms | ActiveRecord: 3.3ms)


Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:20:49 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 52ms (ActiveRecord: 2.0ms)


  
NoMethodError (undefined method `sum' for #<Water id: 1, type: "Water", amount: 10, survivor_id: 1>):
  
app/models/resource.rb:19:in `points_sum'
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:21:40 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.8ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 59ms (ActiveRecord: 3.1ms)


  
ArgumentError (wrong number of arguments (given 0, expected 1..2)):
  
app/models/resource.rb:19:in `points_sum'
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:24:31 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 91ms (ActiveRecord: 2.8ms)


  
NoMethodError (undefined method `sum' for #<Water id: 1, type: "Water", amount: 10, survivor_id: 1>):
  
app/models/resource.rb:19:in `points_sum'
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:24:41 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 41ms (ActiveRecord: 2.4ms)


  
ArgumentError (wrong number of arguments (given 0, expected 1..2)):
  
app/models/resource.rb:19:in `points_sum'
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:25:06 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 77ms (ActiveRecord: 3.2ms)


  
ActiveModel::MissingAttributeError (can't write unknown attribute `40`):
  
app/models/resource.rb:19:in `points_sum'
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:25:55 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 47ms (ActiveRecord: 2.8ms)


  
NoMethodError (undefined method `increment!' for 0:Integer):
  
app/models/resource.rb:20:in `points_sum'
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:26:26 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 200 OK in 45ms (Views: 0.3ms | ActiveRecord: 2.8ms)


Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:27:09 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 36ms (ActiveRecord: 2.4ms)


  
NoMethodError (undefined method `sum' for 40:Integer
Did you mean?  succ):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:27:20 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 78ms (ActiveRecord: 3.4ms)


  
NoMethodError (undefined method `increment!' for 40:Integer):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:27:22 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.3ms)


  
NoMethodError (undefined method `increment!' for 40:Integer):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:27:28 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 45ms (ActiveRecord: 2.7ms)


  
NoMethodError (undefined method `increment' for 40:Integer):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:27:53 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/controllers/reports_controller.rb:38: syntax error, unexpected end
    end
    ^~~
/home/roberto/Documents/Ruby/zssn-api/app/controllers/reports_controller.rb:66: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/reports_controller.rb:38: syntax error, unexpected end
app/controllers/reports_controller.rb:66: syntax error, unexpected end-of-input, expecting end
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:27:59 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/controllers/reports_controller.rb:38: syntax error, unexpected end
    end
    ^~~
/home/roberto/Documents/Ruby/zssn-api/app/controllers/reports_controller.rb:66: syntax error, unexpected end-of-input, expecting end):
  
app/controllers/reports_controller.rb:38: syntax error, unexpected end
app/controllers/reports_controller.rb:66: syntax error, unexpected end-of-input, expecting end
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:28:14 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 185ms (ActiveRecord: 3.3ms)


  
NoMethodError (undefined method `increment!' for #<ReportsController:0x000055e061478410>):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:28:37 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 62ms (ActiveRecord: 2.2ms)


  
NoMethodError (undefined method `increment!' for 40:Integer):
  
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:28:58 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:46
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:34
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:36
Completed 500 Internal Server Error in 86ms (ActiveRecord: 3.1ms)


  
TypeError (nil can't be coerced into Integer):
  
app/controllers/reports_controller.rb:37:in `+'
app/controllers/reports_controller.rb:37:in `block in lost_infected_points'
app/controllers/reports_controller.rb:36:in `lost_infected_points'
Started GET "/reports/lost_infected_points" for 127.0.0.1 at 2019-03-24 21:29:12 -0300
Processing by ReportsController#lost_infected_points as */*
  Parameters: {"report"=>{}}
  [1m[36mSurvivor Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "survivors" LIMIT ?[0m  [["LIMIT", 1]]
  â†³ app/controllers/reports_controller.rb:47
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "survivors"."id" FROM "survivors" WHERE (infection_mark >= 3)[0m
  â†³ app/controllers/reports_controller.rb:35
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT "resources".* FROM "resources" WHERE "resources"."survivor_id" = ?[0m  [["survivor_id", 1]]
  â†³ app/controllers/reports_controller.rb:37
Completed 200 OK in 72ms (Views: 0.3ms | ActiveRecord: 3.2ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:00:02 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 34ms (Views: 0.3ms | ActiveRecord: 2.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:00:59 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 27ms (Views: 0.3ms | ActiveRecord: 1.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:01:26 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mWater Update All (88.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:61
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:64
  [1m[36mWater Update All (109.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:65
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mAmmunition Update All (107.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:67
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:70
  [1m[36mAmmunition Update All (113.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:71
Completed 200 OK in 527ms (Views: 0.6ms | ActiveRecord: 421.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:15:55 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3444", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3444], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
Completed 404 Not Found in 8ms (Views: 0.3ms | ActiveRecord: 1.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:20:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1555}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 422 Unprocessable Entity in 19ms (Views: 0.4ms | ActiveRecord: 1.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:22:06 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>5}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 45ms (Views: 0.3ms | ActiveRecord: 3.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:23:50 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mWater Update All (91.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:61
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:64
  [1m[36mWater Update All (108.5ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:65
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mAmmunition Update All (108.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:67
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:70
  [1m[36mAmmunition Update All (105.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:71
Completed 200 OK in 486ms (Views: 0.5ms | ActiveRecord: 417.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:25:44 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mWater Update All (101.4ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:61
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:64
  [1m[36mWater Update All (92.1ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:65
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mAmmunition Update All (107.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:67
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:70
  [1m[36mAmmunition Update All (105.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:71
Completed 200 OK in 505ms (Views: 0.4ms | ActiveRecord: 410.7ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:28:20 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (1.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mWater Update All (96.3ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (4.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:61
  [1m[36mCACHE Resource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:64
  [1m[36mWater Update All (92.5ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:65
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mAmmunition Update All (94.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:67
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:70
  [1m[36mAmmunition Update All (112.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:71
Completed 500 Internal Server Error in 555ms (ActiveRecord: 410.4ms)


  
NameError (uninitialized constant Trade::TradeMessage):
  
app/models/trade.rb:76:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:28:38 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.9ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (1.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mWater Update All (100.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:61
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:64
  [1m[36mWater Update All (101.0ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:65
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mAmmunition Update All (93.6ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:67
  [1m[36mCACHE Resource Load (0.1ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:70
  [1m[36mAmmunition Update All (97.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:71
Completed 500 Internal Server Error in 678ms (ActiveRecord: 406.0ms)


  
ArgumentError (wrong number of arguments (given 1, expected 4)):
  
app/models/trade.rb:5:in `initialize'
app/models/trade.rb:76:in `new'
app/models/trade.rb:76:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:31:28 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mWater Update All (93.8ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 5]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:61
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:64
  [1m[36mWater Update All (71.2ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 1 WHERE "resources"."type" IN ('Water') AND "resources"."id" = ?[0m  [["id", 20]]
  â†³ app/models/trade.rb:65
  [1m[36mResource Load (0.6ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 10], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
  [1m[36mAmmunition Update All (97.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) - 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 21]]
  â†³ app/models/trade.rb:59
  [1m[36mResource Load (0.7ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:67
  [1m[36mCACHE Resource Load (0.0ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Ammunition"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:70
  [1m[36mAmmunition Update All (99.7ms)[0m  [1m[33mUPDATE "resources" SET "amount" = COALESCE("amount", 0) + 4 WHERE "resources"."type" IN ('Ammunition') AND "resources"."id" = ?[0m  [["id", 29]]
  â†³ app/models/trade.rb:71
Completed 200 OK in 459ms (Views: 0.4ms | ActiveRecord: 367.8ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:37:04 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (4.6ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 409 Conflict in 53ms (Views: 0.3ms | ActiveRecord: 10.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:37:34 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (1.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 409 Conflict in 24ms (Views: 0.3ms | ActiveRecord: 3.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:40:08 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:86: syntax error, unexpected '+', expecting '.' or &. or :: or '['
...Resource.points_sum(resource) + @survivor_point
...                              ^):
  
app/models/trade.rb:86: syntax error, unexpected '+', expecting '.' or &. or :: or '['
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:42:25 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 55ms (ActiveRecord: 2.9ms)


  
TypeError (nil can't be coerced into Integer):
  
app/models/resource.rb:20:in `+'
app/models/resource.rb:20:in `points_sum'
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:42:38 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 32ms (ActiveRecord: 2.1ms)


  
TypeError (nil can't be coerced into Integer):
  
app/models/resource.rb:20:in `+'
app/models/resource.rb:20:in `points_sum'
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:43:00 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 409 Conflict in 92ms (Views: 0.3ms | ActiveRecord: 5.1ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:43:11 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (1.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 409 Conflict in 20ms (Views: 0.3ms | ActiveRecord: 2.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:45:05 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 68ms (ActiveRecord: 1.9ms)


  
NoMethodError (undefined method `sum' for #<ActionController::Parameters:0x000055e061b773b0>):
  
app/models/resource.rb:20:in `points_sum'
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:46:19 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM(4) FROM "resources"[0m
  â†³ app/models/resource.rb:20
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT SUM(3) FROM "resources"[0m
  â†³ app/models/resource.rb:20
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM(7) FROM "resources"[0m
  â†³ app/models/resource.rb:20
Completed 409 Conflict in 61ms (Views: 0.3ms | ActiveRecord: 4.5ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:46:49 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 65ms (ActiveRecord: 2.5ms)


  
NoMethodError (undefined method `increment!' for #<Class:0x00007f44241d55a0>
Did you mean?  increment_counter):
  
app/models/resource.rb:20:in `points_sum'
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:47:04 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM(4) FROM "resources"[0m
  â†³ app/models/resource.rb:20
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM(3) FROM "resources"[0m
  â†³ app/models/resource.rb:20
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT SUM(7) FROM "resources"[0m
  â†³ app/models/resource.rb:20
Completed 409 Conflict in 83ms (Views: 0.3ms | ActiveRecord: 4.9ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:48:09 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 409 Conflict in 44ms (Views: 0.3ms | ActiveRecord: 3.6ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:48:35 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:85: syntax error, unexpected tSTRING_BEG, expecting do or '{' or '('
...oints + instance_variable_set "@#{survivor}_points", Resourc...
...                              ^
/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:85: syntax error, unexpected ',', expecting end
...able_set "@#{survivor}_points", Resource.points_sum(resource)
...                              ^):
  
app/models/trade.rb:85: syntax error, unexpected tSTRING_BEG, expecting do or '{' or '('
app/models/trade.rb:85: syntax error, unexpected ',', expecting end
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:48:57 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 48ms (ActiveRecord: 3.4ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:49:00 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.8ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:49:10 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 57ms (ActiveRecord: 2.6ms)


  
NoMethodError (undefined method `+' for nil:NilClass):
  
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:50:20 -0300
  
SyntaxError (/home/roberto/Documents/Ruby/zssn-api/app/models/trade.rb:85: syntax error, unexpected tSTRING_BEG, expecting do or '{' or '('
...urce) + instance_variable_get "@#{survivor}_points"
...                              ^):
  
app/models/trade.rb:85: syntax error, unexpected tSTRING_BEG, expecting do or '{' or '('
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:50:38 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 70ms (ActiveRecord: 5.1ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:51:48 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 66ms (ActiveRecord: 6.0ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:51:57 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 58ms (ActiveRecord: 5.0ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:52:11 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 77ms (ActiveRecord: 4.5ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:54:58 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 35ms (ActiveRecord: 2.7ms)


  
NoMethodError (undefined method `all' for #<ActionController::Parameters:0x00007f44241c3620>):
  
app/models/resource.rb:20:in `points_sum'
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:55:09 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 92ms (ActiveRecord: 4.7ms)


  
NoMethodError (undefined method `inject' for #<ActionController::Parameters:0x00007f4420497e18>
Did you mean?  inspect):
  
app/models/resource.rb:20:in `points_sum'
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:55:28 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT "resources".* FROM "resources"[0m
  â†³ app/models/resource.rb:20
Completed 500 Internal Server Error in 54ms (ActiveRecord: 3.5ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/resource.rb:20:in `points_sum'
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:58:56 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 73ms (ActiveRecord: 2.3ms)


  
NoMethodError (undefined method `to_i' for [:amount]:Array
Did you mean?  to_s
               to_a
               to_h):
  
app/models/resource.rb:20:in `points_sum'
app/models/trade.rb:85:in `validate_balance'
app/models/trade.rb:45:in `block (2 levels) in check_inconsistent_resources'
app/models/trade.rb:40:in `each'
app/models/trade.rb:40:in `block in check_inconsistent_resources'
app/models/trade.rb:39:in `each'
app/models/trade.rb:39:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:59:39 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 409 Conflict in 47ms (Views: 0.4ms | ActiveRecord: 4.3ms)


Started POST "/trade" for 127.0.0.1 at 2019-03-24 22:59:54 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 103ms (ActiveRecord: 11.7ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:01:02 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 47ms (ActiveRecord: 4.0ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:07:31 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 80ms (ActiveRecord: 2.7ms)


  
NameError (undefined local variable or method `check_points' for #<Trade:0x000055e061bd5e10>
Did you mean?  checkpoints):
  
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:07:44 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 67ms (ActiveRecord: 5.3ms)


  
ArgumentError (wrong number of arguments (given 0, expected 1)):
  
app/models/trade.rb:84:in `check_points'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:08:01 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 82ms (ActiveRecord: 4.7ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/resource.rb:19:in `points_sum'
app/models/trade.rb:85:in `check_points'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:10:17 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 44ms (ActiveRecord: 3.3ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/resource.rb:19:in `points_sum'
app/models/trade.rb:86:in `block in check_points'
app/models/trade.rb:85:in `each'
app/models/trade.rb:85:in `check_points'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:10:36 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 109ms (ActiveRecord: 5.0ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/resource.rb:19:in `points_sum'
app/models/trade.rb:86:in `block in check_points'
app/models/trade.rb:85:in `each'
app/models/trade.rb:85:in `check_points'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:10:56 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (3.8ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 51ms (ActiveRecord: 6.7ms)


  
TypeError (no implicit conversion of Symbol into Integer):
  
app/models/resource.rb:19:in `points_sum'
app/models/trade.rb:86:in `block in check_points'
app/models/trade.rb:85:in `each'
app/models/trade.rb:85:in `check_points'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:11:53 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 44ms (ActiveRecord: 3.4ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:23:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:13:45 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.7ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 41ms (ActiveRecord: 4.4ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:14:02 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}, {"type"=>"Food", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>7}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:83
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Food"]]
  â†³ app/models/trade.rb:83
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:83
  [1m[36mResource Load (0.5ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:60
Completed 500 Internal Server Error in 96ms (ActiveRecord: 5.4ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:60:in `block (2 levels) in trade_resources'
app/models/trade.rb:58:in `each'
app/models/trade.rb:58:in `block in trade_resources'
app/models/trade.rb:57:in `each'
app/models/trade.rb:57:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:18:24 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.5ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.2ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 37ms (ActiveRecord: 3.4ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:18:45 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (13.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 38ms (ActiveRecord: 15.1ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:20:56 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.4ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 26ms (ActiveRecord: 1.7ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:21:38 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.4ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
Completed 500 Internal Server Error in 107ms (ActiveRecord: 3.6ms)


  
NoMethodError (undefined method `points_sum' for #<Class:0x000055e061e6a3b0>):
  
app/models/trade.rb:86:in `block in check_points'
app/models/trade.rb:85:in `each'
app/models/trade.rb:85:in `check_points'
app/models/trade.rb:47:in `check_inconsistent_resources'
app/models/trade.rb:21:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:21:47 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 85ms (ActiveRecord: 6.3ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
Started POST "/trade" for 127.0.0.1 at 2019-03-24 23:22:54 -0300
Processing by TradesController#trade as */*
  Parameters: {"trade"=>{"survivor1"=>{"id"=>"3", "resources"=>[{"type"=>"Water", "amount"=>1}]}, "survivor2"=>{"id"=>"10", "resources"=>[{"type"=>"Ammunition", "amount"=>4}]}}}
  [1m[36mSurvivor Load (0.3ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:3
  [1m[36mSurvivor Load (0.2ms)[0m  [1m[34mSELECT  "survivors".* FROM "survivors" WHERE "survivors"."id" = ? LIMIT ?[0m  [["id", 10], ["LIMIT", 1]]
  â†³ app/controllers/trades_controller.rb:4
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 3], ["type", "Water"]]
  â†³ app/models/trade.rb:81
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "resources"."amount" FROM "resources" WHERE "resources"."survivor_id" = ? AND "resources"."type" = ?[0m  [["survivor_id", 10], ["type", "Ammunition"]]
  â†³ app/models/trade.rb:81
  [1m[36mResource Load (0.3ms)[0m  [1m[34mSELECT  "resources".* FROM "resources" WHERE "resources"."type" = ? AND "resources"."survivor_id" = ? ORDER BY "resources"."id" ASC LIMIT ?[0m  [["type", "Water"], ["survivor_id", 3], ["LIMIT", 1]]
  â†³ app/models/trade.rb:58
Completed 500 Internal Server Error in 43ms (ActiveRecord: 4.1ms)


  
ActiveRecord::SubclassNotFound (The single-table inheritance mechanism failed to locate the subclass: 'Water'. This error is raised because the column 'type' is reserved for storing the class in case of inheritance. Please rename this column if you didn't intend it to be used for storing the inheritance class or overwrite Resource.inheritance_column to use another column for that information.):
  
app/models/trade.rb:58:in `block (2 levels) in trade_resources'
app/models/trade.rb:56:in `each'
app/models/trade.rb:56:in `block in trade_resources'
app/models/trade.rb:55:in `each'
app/models/trade.rb:55:in `trade_resources'
app/models/trade.rb:22:in `process'
app/controllers/trades_controller.rb:9:in `trade'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (135.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (135.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateSurvivors (20190318235202)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "age" integer, "gender" varchar(1), "latitude" float, "longitude" float, "infection_mark" integer DEFAULT 0)[0m
  â†³ db/migrate/20190318235202_create_survivors.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235202"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (115.9ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateResources (20190323012036)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "resources" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "type" varchar, "amount" integer, "survivor_id" integer, CONSTRAINT "fk_rails_a37fe4a4e9"
FOREIGN KEY ("survivor_id")
  REFERENCES "survivors" ("id")
)[0m
  â†³ db/migrate/20190323012036_create_resources.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mCREATE  INDEX "index_resources_on_survivor_id" ON "resources" ("survivor_id")[0m
  â†³ db/migrate/20190323012036_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190323012036"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (106.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (1.9ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-03-25 02:24:15.768796"], ["updated_at", "2019-03-25 02:24:15.768796"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (69.2ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (10.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (119.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (111.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateSurvivors (20190318235202)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "survivors" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "age" integer, "gender" varchar(1), "latitude" float, "longitude" float, "infection_mark" integer DEFAULT 0)[0m
  â†³ db/migrate/20190318235202_create_survivors.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190318235202"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (93.8ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
Migrating to CreateResources (20190323012036)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "resources" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "item" varchar, "amount" integer, "survivor_id" integer, CONSTRAINT "fk_rails_a37fe4a4e9"
FOREIGN KEY ("survivor_id")
  REFERENCES "survivors" ("id")
)[0m
  â†³ db/migrate/20190323012036_create_resources.rb:3
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_resources_on_survivor_id" ON "resources" ("survivor_id")[0m
  â†³ db/migrate/20190323012036_create_resources.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20190323012036"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (104.7ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-03-25 02:30:32.308007"], ["updated_at", "2019-03-25 02:30:32.308007"]]
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (60.4ms)[0m  [1m[36mcommit transaction[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /home/roberto/.rbenv/versions/2.6.2/bin/rake:23
